"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8845],{9617:(e,t,a)=>{a.d(t,{o2:()=>i,tR:()=>r});var l=a(20556),n=a(95704);let i=l.Yj().min(1,"NEXT_PUBLIC_RADIATOR_BASE_PATH must not be empty").parse("/doc-pages/v10.30.0"),r=l.KC([l.eu("management"),l.eu("docs")]).optional().default("management").parse("docs");l.uE().optional().default(!1).parse(n.env.NEXT_PUBLIC_RADIATOR_PUBLIC)},38661:(e,t,a)=>{a.d(t,{S:()=>s});var l=a(95155);a(12115);var n=a(52619),i=a.n(n),r=a(22003),o=a(34880),d=a(25635);let s=e=>{let{errors:t,changedFilesDetail:a,enableLinks:n=!0,className:s,includeMessage:c=!1,fallbackToMessageWhenNoCauses:u=!0,severity:f="error"}=e;if(!t||0===t.length)return null;let x=function(e,t){return e&&0!==e.length?e.map(e=>(function(e,t){var a;let{includeMessage:l=!1,fallbackToMessageWhenNoCauses:n=!0}=t||{},i=null!=(a=e.file)?a:null,r=i||null!=e.line?"".concat(null!=i?i:"").concat(null!=e.line?":".concat(e.line):"").replace(/^:/,""):null,o=[];if(l&&o.push(e.message),e.causes&&e.causes.length>0){let t=e.causes.join("\n");o.push(...t.split("\n"))}else!l&&n&&o.push(e.message);return{fileLine:r,causeLines:o,original:e}})(e,t)):[]}(t,{includeMessage:c,fallbackToMessageWhenNoCauses:u});return(0,l.jsx)(r.A,{severity:f,className:s,children:(0,l.jsx)(o.default,{children:x.map((e,t)=>{var r,s;let c=e.original,u=null!=(r=c.file)?r:"",f=!!(u&&(null==a?void 0:a.some(e=>e.path===u&&"deleted"===e.changeType)));return(0,l.jsxs)(o.default,{className:t>0?"mt-3":"",children:[u?(0,l.jsx)(d.default,{variant:"body2",className:"mb-1",children:n&&!f?(0,l.jsxs)(i(),{href:"/configuration-file-details?filename=".concat(encodeURIComponent(u),"&line=").concat(null!=(s=c.line)?s:1,"&autoCheck=true"),children:[u,null!=c.line?":".concat(c.line):""]}):(0,l.jsxs)(l.Fragment,{children:[u,null!=c.line?":".concat(c.line):""]})}):null,e.causeLines.map((e,t)=>(0,l.jsx)(d.default,{variant:"body2",sx:{whiteSpace:"pre-wrap",m:0,...t>0?{paddingLeft:"2ch"}:{}},children:e},t))]},t)})})})}},47601:(e,t,a)=>{a.d(t,{B:()=>ea});var l=a(95155),n=a(70690),i=a(34880),r=a(25635),o=a(4474),d=a(22003),s=a(99944),c=a(22822),u=a(61023),f=a(75912),x=a(31102),p=a(12115),m=a(43070),b=a(2300),h=a(16963),g=a(2456),v=a(64792),y=a(71356),j=a(45202),w=a(78470),A=a(41983),S=a(4484);let _=e=>"group"===e.type,N=e=>(e=>"string"===e.type||"password"===e.type||"boolean"===e.type||"number"===e.type)(e)?e.placeholder:void 0,k=e=>{let t=N(e);if(void 0!==t)return t;switch(e.type){case"boolean":return!1;case"number":return 0;default:return""}},C=e=>{let t={};for(let l of e.items)if(_(l)){var a;let e=null!=(a=l.min)?a:0,n=[];for(let t=0;t<e;t++)n.push(C(l));t[l.id]=n}else t[l.id]=k(l);return t},I=e=>e.map(e=>{let t={};for(let[a,l]of Object.entries(e))t[a]=Array.isArray(l)?I(l):l;return t}),Y=e=>{var t;let{group:a,instances:n,onRemove:o,onChange:d}=e,s=(null!=(t=a.min)?t:0)<n.length;return(0,l.jsx)(i.default,{className:"mt-4",children:(0,l.jsx)(m.A,{component:b.default,variant:"outlined",children:(0,l.jsxs)(h.A,{size:"small",children:[(0,l.jsx)(g.A,{children:(0,l.jsxs)(v.A,{children:[a.items.filter(e=>"group"!==e.type).map(e=>(0,l.jsx)(y.A,{children:e.label},e.id)),(0,l.jsx)(y.A,{width:"1%",children:"Actions"})]})}),(0,l.jsxs)(j.A,{children:[0===n.length&&(0,l.jsx)(v.A,{children:(0,l.jsx)(y.A,{colSpan:a.items.length+1,align:"center",children:(0,l.jsx)(r.default,{variant:"caption",color:"text.secondary",children:"No rows"})})}),n.map((e,t)=>(0,l.jsxs)(v.A,{children:[a.items.filter(e=>"group"!==e.type).map(n=>(0,l.jsx)(y.A,{children:((e,t,n)=>{if(Array.isArray(n))return(0,l.jsxs)(r.default,{variant:"caption",color:"text.secondary",children:[n.length," nested entr",1===n.length?"y":"ies"," (table layout does not edit nested groups)"]});if("boolean"===t.type)return(0,l.jsx)(c.A,{size:"small",checked:!!n,onChange:l=>d(a.id,e,t.id,l.target.checked)});let i="number"===t.type;return(0,l.jsx)(u.A,{size:"small",type:"password"===t.type?"password":i?"number":"text",value:void 0===n?"":String(n),onChange:l=>d(a.id,e,t.id,l.target.value),placeholder:(()=>{let e=N(t);return void 0!==e?String(e):void 0})(),slotProps:{htmlInput:{"aria-label":t.label,...i?{step:"1",min:"0"}:{}}},fullWidth:!0})})(t,n,e[n.id])},n.id)),(0,l.jsx)(y.A,{children:(0,l.jsx)(w.A,{title:"Remove row",children:(0,l.jsx)("span",{children:(0,l.jsx)(A.default,{size:"small",onClick:()=>o(a,t),disabled:!s,children:(0,l.jsx)(S.A,{fontSize:"small"})})})})})]},t))]})]})})})};var F=a(52641),E=a(51221),P=a(55606),q=a(86973),D=a(41602),K=a(23820),T=a(17681),O=a(48606);let Q=e=>e.replace(/\/+$/,""),M=e=>{let t=e.lastIndexOf(".");return t>0?e.slice(0,t):e},R=(e,t,a,l)=>{let n=Q(e);if("cert_dir"===t)return"".concat(n,"/").concat(a,"/").concat(l);let i=l.lastIndexOf("."),r=i>=0?l.slice(i):"";return"".concat(n,"/").concat(a).concat(r)};var z=a(50927);let U=e=>{let{field:t,value:a,onChange:n}=e,o=(()=>{let e=N(t);return void 0!==e?String(e):void 0})();if("boolean"===t.type)return(0,l.jsxs)(i.default,{children:[(0,l.jsx)(s.A,{control:(0,l.jsx)(c.A,{checked:!!a,onChange:e=>n(e.target.checked)}),label:t.label}),t.description&&(0,l.jsx)(r.default,{variant:"caption",color:"text.secondary",sx:{ml:4},children:t.description})]});let d="number"===t.type;return(0,l.jsx)(u.A,{label:t.label,type:"password"===t.type?"password":d?"number":"text",value:void 0===a?"":String(a),onChange:e=>{let t=e.target.value;if(d&&""!==t.trim()){let e=Number(t);if(Number.isFinite(e))return void n(e)}n(t)},placeholder:o,helperText:t.description,fullWidth:!0,required:!0,slotProps:{htmlInput:d?{step:"1",min:"0",inputMode:"numeric"}:void 0}})},L=e=>{var t;let{field:a,value:n,onChange:o}=e,d=Q(a.path),{data:s}=(0,z.hY)(d),c=null!=(t=null==s?void 0:s.entries)?t:[],u=[];if("cert_dir"===a.file_type)u=c.filter(e=>e.isDir).map(e=>{let t=e.path.replace(/\/+$/,"");return t.split("/").pop()||t}).sort();else{let e=new Set;for(let t of c){if(t.isDir)continue;let a=M(t.path.replace(/.*\//,""));a&&e.add(a)}u=Array.from(e).sort()}let f=void 0===n?"":String(n);return(0,l.jsxs)(i.default,{children:[(0,l.jsxs)(F.A,{fullWidth:!0,children:[(0,l.jsx)(E.A,{id:"".concat(a.id,"-label"),children:a.label}),(0,l.jsxs)(P.A,{labelId:"".concat(a.id,"-label"),label:a.label,value:f,onChange:e=>o(String(e.target.value)),required:!a.optional,children:[a.optional&&(0,l.jsx)(q.A,{value:"",children:(0,l.jsx)("em",{children:"None"})}),u.map(e=>(0,l.jsx)(q.A,{value:e,children:e},e))]})]}),a.description&&(0,l.jsx)(r.default,{variant:"caption",color:"text.secondary",children:a.description})]})},J=e=>{let{field:t,value:a,onChange:n,selectedFiles:o,onSelectFiles:d,onDeleteFile:s}=e,c=void 0===a?"":String(a),f=Q(t.path),{data:x}=(0,z.hY)(f),[m]=p.useState(()=>"cert_dir"===t.file_type&&c.length>0),b="cert_dir"===t.file_type&&c?"".concat(f,"/").concat(c):f,{data:h}=(0,z.hY)(b,{enabled:m}),g="string"==typeof t._persistedFilePath?t._persistedFilePath:null,v=[];"cert_dir"===t.file_type&&c&&(v=((null==h?void 0:h.entries)||[]).filter(e=>!e.isDir).map(e=>e.path.startsWith("".concat(f,"/").concat(c,"/"))?e.path:"".concat(f,"/").concat(c,"/").concat(e.path)).sort());let y=null;if(g&&"cert_dir"!==t.file_type){let e=null==x?void 0:x.entries;e&&e.some(e=>!e.isDir&&(e.path.startsWith("".concat(f,"/"))?e.path:"".concat(f,"/").concat(e.path))===g)&&(y=g)}let j=(()=>{let e=N(t);return void 0!==e?String(e):void 0})(),w=!!("cert_dir"!==t.file_type&&y||"cert_dir"===t.file_type&&v.length>0);return(0,l.jsxs)(i.default,{className:"flex flex-col gap-2",children:[(0,l.jsx)(u.A,{label:t.label,type:"text",value:c,onChange:e=>n(e.target.value),placeholder:j,helperText:t.description,fullWidth:!0,required:!0,disabled:w,inputProps:w?{title:"Editing the certificate ID is not allowed after a file has been uploaded. Delete the file to change the ID."}:void 0}),(0,l.jsx)("input",{type:"file",multiple:"cert_dir"===t.file_type,onChange:e=>{d&&d(e.target.files?Array.from(e.target.files):[])},disabled:!d}),o&&o.length>0&&(0,l.jsxs)(r.default,{variant:"caption",color:"text.secondary",children:["Selected: ",o.map(e=>e.name).join(", ")]}),"cert_dir"===t.file_type&&v.length>0&&(0,l.jsxs)(i.default,{children:[(0,l.jsx)(r.default,{variant:"subtitle2",children:"Existing files"}),(0,l.jsx)(D.default,{dense:!0,children:v.map(e=>(0,l.jsx)(K.default,{secondaryAction:s?(0,l.jsx)(A.default,{edge:"end","aria-label":"delete",onClick:()=>s(e),children:(0,l.jsx)(S.A,{})}):void 0,children:(0,l.jsx)(T.default,{primary:e})},e))})]}),"cert_dir"!==t.file_type&&y&&(0,l.jsxs)(i.default,{children:[(0,l.jsx)(r.default,{variant:"subtitle2",children:"Existing file"}),(0,l.jsx)(D.default,{dense:!0,children:(0,l.jsx)(K.default,{secondaryAction:s?(0,l.jsx)(A.default,{edge:"end","aria-label":"delete",onClick:()=>s(y),children:(0,l.jsx)(S.A,{})}):void 0,children:(0,l.jsx)(T.default,{primary:y})},y)})]})]})},V=e=>{let{field:t,value:a,onChange:n,onDeleteFile:i,selectedFiles:r,onSelectFiles:o}=e;return(0,O.cD)(t)?(0,l.jsx)(L,{field:t,value:a,onChange:n}):(0,O.gO)(t)?(0,l.jsx)(J,{field:t,value:a,onChange:n,selectedFiles:r,onSelectFiles:o,onDeleteFile:i}):(0,l.jsx)(U,{field:t,value:a,onChange:n})};var W=a(86946);let B=e=>{var t;let{group:a,instances:o,onUpdate:s,path:c=[],onDeleteFile:u,getSelectedFiles:f,setSelectedFiles:x,allowTableLayout:m=!0,onTouched:b}=e,h=a.layout||"form",g=[...c,a.id],v=(0,p.useCallback)(()=>{void 0!==a.max&&o.length>=a.max||(s([...o,C(a)]),null==b||b())},[a,o,s,b]),y=(0,p.useCallback)(e=>{var t;if((null!=(t=a.min)?t:0)>=o.length)return;let l=[...o];l.splice(e,1),s(l),null==b||b()},[a,o,s,b]),j=(0,p.useCallback)((e,t,a)=>{if(!o[e])return;let l=[...o],n={...l[e]};n[t.id]=a,l[e]=n,s(l),null==b||b()},[o,s,b]),w=(0,p.useCallback)((e,t,a)=>{if(!o[e])return;let l=[...o],n={...l[e]};n[t.id]=a,l[e]=n,s(l),null==b||b()},[o,s,b]);return"table"===h?m?a.items.some(_)?(0,l.jsx)(d.A,{severity:"warning",sx:{mt:2},children:'Group "'.concat(a.label,'" uses layout="table" but contains nested groups.\n            Nested groups inside table layout are not supported for editing.')}):(0,l.jsxs)(i.default,{mt:2,children:[(0,l.jsxs)(i.default,{className:"flex justify-between items-center mb-2 gap-3",children:[(0,l.jsxs)(i.default,{className:"flex flex-col",children:[(0,l.jsx)(r.default,{variant:"subtitle1",children:a.label}),a.description&&(0,l.jsx)(r.default,{variant:"body2",color:"text.secondary",className:"mt-0.5",children:a.description})]}),(0,l.jsxs)(n.default,{size:"small",variant:"outlined",startIcon:(0,l.jsx)(W.A,{}),onClick:v,disabled:void 0!==a.max&&o.length>=a.max,children:["Add ",a.label]})]}),(0,l.jsx)(Y,{group:a,instances:o,onRemove:(e,t)=>y(t),onChange:(e,t,l,n)=>{if(e!==a.id)return;let i=a.items.find(e=>!_(e)&&e.id===l);i&&j(t,i,n)}})]}):(0,l.jsx)(d.A,{severity:"warning",sx:{mt:2},children:"Table layout has been disabled for this context."}):(0,l.jsxs)(i.default,{mt:2,children:[(0,l.jsxs)(i.default,{className:"flex justify-between items-center mb-2 gap-3",children:[(0,l.jsxs)(i.default,{className:"flex flex-col",children:[(0,l.jsxs)(r.default,{variant:"subtitle1",children:[a.label,(void 0!==a.min||void 0!==a.max)&&(0,l.jsxs)(r.default,{component:"span",variant:"caption",color:"text.secondary",sx:{ml:1},children:["(",null!=(t=a.min)?t:0,void 0!==a.max?"..".concat(a.max):"+",")"]})]}),a.description&&(0,l.jsx)(r.default,{variant:"body2",color:"text.secondary",className:"mt-0.5",children:a.description})]}),(0,l.jsxs)(n.default,{size:"small",variant:"outlined",startIcon:(0,l.jsx)(W.A,{}),onClick:v,disabled:void 0!==a.max&&o.length>=a.max,children:["Add ",a.label]})]}),o.map((e,t)=>{var n;return(0,l.jsxs)(i.default,{className:"border rounded p-3 mb-2 flex flex-col gap-3",children:[(0,l.jsxs)(i.default,{className:"flex justify-between items-center",children:[(0,l.jsxs)(r.default,{variant:"subtitle2",children:[a.label," #",t+1]}),(0,l.jsx)(A.default,{size:"small",onClick:()=>y(t),disabled:(null!=(n=a.min)?n:0)>=o.length,"aria-label":"Remove",children:(0,l.jsx)(S.A,{fontSize:"small"})})]}),a.items.map(a=>{if(_(a)){let n=e[a.id]||[];return(0,l.jsx)(B,{group:a,instances:n,onUpdate:e=>w(t,a,e),path:g,onDeleteFile:u,getSelectedFiles:f,setSelectedFiles:x,allowTableLayout:m,onTouched:b},a.id)}let n=e[a.id],i=a;if((0,O.gO)(a)&&a.filename_id){let t=e[a.filename_id];"string"==typeof t&&t.trim().length>0&&(i={...a,_persistedFilePath:t})}return(0,l.jsx)(V,{field:i,value:Array.isArray(n)?void 0:n,onChange:e=>j(t,a,e),onDeleteFile:u,selectedFiles:f?f(a.id,g,t):void 0,onSelectFiles:x?e=>x(a.id,e,g,t):void 0},"".concat(a.id,"-").concat(t))})]},t)})]})};var H=a(89134),G=a(71991),X=a(75358),$=a.n(X);class Z{update(e){for(var t=new Uint8Array(e,0),a=t.length,l=0;l<a;l++)this.crc=this.crc>>>8^ee[(this.crc^t[l])&255]}digest(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;var t=new DataView(new ArrayBuffer(4));return t.setUint32(0,~this.crc>>>0,!1),t.getUint32(0).toString(e)}constructor(){this.crc=0xffffffff}}let ee=[0,0x77073096,0xee0e612c,0x990951ba,0x76dc419,0x706af48f,0xe963a535,0x9e6495a3,0xedb8832,0x79dcb8a4,0xe0d5e91e,0x97d2d988,0x9b64c2b,0x7eb17cbd,0xe7b82d07,0x90bf1d91,0x1db71064,0x6ab020f2,0xf3b97148,0x84be41de,0x1adad47d,0x6ddde4eb,0xf4d4b551,0x83d385c7,0x136c9856,0x646ba8c0,0xfd62f97a,0x8a65c9ec,0x14015c4f,0x63066cd9,0xfa0f3d63,0x8d080df5,0x3b6e20c8,0x4c69105e,0xd56041e4,0xa2677172,0x3c03e4d1,0x4b04d447,0xd20d85fd,0xa50ab56b,0x35b5a8fa,0x42b2986c,0xdbbbc9d6,0xacbcf940,0x32d86ce3,0x45df5c75,0xdcd60dcf,0xabd13d59,0x26d930ac,0x51de003a,0xc8d75180,0xbfd06116,0x21b4f4b5,0x56b3c423,0xcfba9599,0xb8bda50f,0x2802b89e,0x5f058808,0xc60cd9b2,0xb10be924,0x2f6f7c87,0x58684c11,0xc1611dab,0xb6662d3d,0x76dc4190,0x1db7106,0x98d220bc,0xefd5102a,0x71b18589,0x6b6b51f,0x9fbfe4a5,0xe8b8d433,0x7807c9a2,0xf00f934,0x9609a88e,0xe10e9818,0x7f6a0dbb,0x86d3d2d,0x91646c97,0xe6635c01,0x6b6b51f4,0x1c6c6162,0x856530d8,0xf262004e,0x6c0695ed,0x1b01a57b,0x8208f4c1,0xf50fc457,0x65b0d9c6,0x12b7e950,0x8bbeb8ea,0xfcb9887c,0x62dd1ddf,0x15da2d49,0x8cd37cf3,0xfbd44c65,0x4db26158,0x3ab551ce,0xa3bc0074,0xd4bb30e2,0x4adfa541,0x3dd895d7,0xa4d1c46d,0xd3d6f4fb,0x4369e96a,0x346ed9fc,0xad678846,0xda60b8d0,0x44042d73,0x33031de5,0xaa0a4c5f,0xdd0d7cc9,0x5005713c,0x270241aa,0xbe0b1010,0xc90c2086,0x5768b525,0x206f85b3,0xb966d409,0xce61e49f,0x5edef90e,0x29d9c998,0xb0d09822,0xc7d7a8b4,0x59b33d17,0x2eb40d81,0xb7bd5c3b,0xc0ba6cad,0xedb88320,0x9abfb3b6,0x3b6e20c,0x74b1d29a,0xead54739,0x9dd277af,0x4db2615,0x73dc1683,0xe3630b12,0x94643b84,0xd6d6a3e,0x7a6a5aa8,0xe40ecf0b,0x9309ff9d,0xa00ae27,0x7d079eb1,0xf00f9344,0x8708a3d2,0x1e01f268,0x6906c2fe,0xf762575d,0x806567cb,0x196c3671,0x6e6b06e7,0xfed41b76,0x89d32be0,0x10da7a5a,0x67dd4acc,0xf9b9df6f,0x8ebeeff9,0x17b7be43,0x60b08ed5,0xd6d6a3e8,0xa1d1937e,0x38d8c2c4,0x4fdff252,0xd1bb67f1,0xa6bc5767,0x3fb506dd,0x48b2364b,0xd80d2bda,0xaf0a1b4c,0x36034af6,0x41047a60,0xdf60efc3,0xa867df55,0x316e8eef,0x4669be79,0xcb61b38c,0xbc66831a,0x256fd2a0,0x5268e236,0xcc0c7795,0xbb0b4703,0x220216b9,0x5505262f,0xc5ba3bbe,0xb2bd0b28,0x2bb45a92,0x5cb36a04,0xc2d7ffa7,0xb5d0cf31,0x2cd99e8b,0x5bdeae1d,0x9b64c2b0,0xec63f226,0x756aa39c,0x26d930a,0x9c0906a9,0xeb0e363f,0x72076785,0x5005713,0x95bf4a82,0xe2b87a14,0x7bb12bae,0xcb61b38,0x92d28e9b,0xe5d5be0d,0x7cdcefb7,0xbdbdf21,0x86d3d2d4,0xf1d4e242,0x68ddb3f8,0x1fda836e,0x81be16cd,0xf6b9265b,0x6fb077e1,0x18b74777,0x88085ae6,0xff0f6a70,0x66063bca,0x11010b5c,0x8f659eff,0xf862ae69,0x616bffd3,0x166ccf45,0xa00ae278,0xd70dd2ee,0x4e048354,0x3903b3c2,0xa7672661,0xd06016f7,0x4969474d,0x3e6e77db,0xaed16a4a,0xd9d65adc,0x40df0b66,936918e3,0xa9bcae53,0xdebb9ec5,0x47b2cf7f,0x30b5ffe9,0xbdbdf21c,0xcabac28a,0x53b39330,0x24b4a3a6,0xbad03605,0xcdd70693,0x54de5729,0x23d967bf,0xb3667a2e,0xc4614ab8,0x5d681b02,0x2a6f2b94,0xb40bbe37,0xc30c8ea1,0x5a05df1b,0x2d02ef8d],et=e=>{let t=new Z,a=new TextEncoder;return t.update(a.encode(e).buffer),t.digest()},ea=(0,p.forwardRef)(function(e,t){var a;let{template:m,initialValues:b,filename:h,onSuccess:g,onClose:v,interpolatedMetadata:y,mode:j="create",className:w,formId:A,onStateChange:S}=e,[_,k]=(0,p.useState)(null!=b?b:{}),[F,E]=(0,p.useState)({}),[P,q]=(0,p.useState)(null),[D,K]=(0,p.useState)(null),[T,M]=(0,p.useState)(!1),U=(0,p.useRef)(!1),[L,J]=(0,p.useState)([]),W=(0,z.vz)({}),X=(0,z.ie)(),[Z,ee]=(0,p.useState)(!1),{data:ea,isLoading:el,error:en}=(0,H.c_)((null==m?void 0:m.filename)||""),ei=(0,z.vz)({}),er=(0,p.useRef)(!1);(0,p.useEffect)(()=>{if(null==ea?void 0:ea.data){let e,t=(e=ea.data,(0,O.qS)(e));t?(q(t),K(null),y&&M(et(ea.data)!==y.originalTemplate.checksum)):(K("Failed to parse template metadata"),q(null))}},[ea,y]),(0,p.useEffect)(()=>{if(P&&!U.current){var e,t;if(Object.keys(null!=b?b:{}).length>0)k(null!=b?b:{});else{let t={};(null!=(e=null==P?void 0:P.items)?e:[]).forEach(e=>{"group"!==e.type&&("placeholder"in e&&void 0!==e.placeholder?t[e.id]=e.placeholder:"boolean"===e.type?t[e.id]=!1:"number"===e.type&&(t[e.id]=0))}),k(t)}let a={};(null!=(t=null==P?void 0:P.items)?t:[]).filter(e=>"group"===e.type).forEach(e=>{var t,l;let n=null==y||null==(t=y.items)?void 0:t.find(t=>"id"in t&&"type"in t&&t.id===e.id&&"group"===t.type);if(n)a[e.id]=n.instances.map(t=>{let a={};return e.items.forEach(e=>{let l=t[e.id];if(Array.isArray(l))a[e.id]=I(l);else if(void 0!==l)a[e.id]=l;else if("group"===e.type){var n;let t=[],l=null!=(n=e.min)?n:0;for(let a=0;a<l;a++)t.push(C(e));a[e.id]=t}else"boolean"===e.type?a[e.id]=!1:"number"===e.type?a[e.id]=0:a[e.id]="placeholder"in e&&void 0!==e.placeholder?e.placeholder:""}),e.items.forEach(e=>{if((0,O.gO)(e)){let l=e.filename_id;l&&void 0!==t[l]&&void 0===a[l]&&(a[l]=t[l])}}),a});else{let t=null!=(l=e.min)?l:0,n=[];for(let a=0;a<t;a++)n.push(C(e));a[e.id]=n}}),E(a),ee(!1),U.current=!0}},[P,b,y,_]),(0,p.useEffect)(()=>{U.current=!1},[null==m?void 0:m.filename]);let eo=(0,p.useCallback)((e,t)=>{k(a=>{var l;return{...a,[e]:"string"!=typeof t||""===t||isNaN(Number(t))||(null==P||null==(l=P.items.find(t=>t.id===e))?void 0:l.type)!=="number"?t:Number(t)}}),ee(!0)},[P]),ed=(0,p.useCallback)((e,t,a,l)=>{E(n=>{var i;let r=n[e]?[...n[e]]:[];if(!r[t])return n;let o=null==P||null==(i=P.items.find(t=>t.id===e&&"group"===t.type))?void 0:i.items.find(e=>e.id===a),d=l;if((null==o?void 0:o.type)==="number"&&"string"==typeof l&&""!==l.trim()){let e=Number(l);Number.isFinite(e)&&(d=e)}return r[t]={...r[t],[a]:d},{...n,[e]:r}}),ee(!0)},[P]),es=(0,p.useCallback)((e,t)=>{E(a=>{var l;let n=a[e.id]||[];if((null!=(l=e.min)?l:0)>=n.length||!n[t])return a;let i=[...n];return i.splice(t,1),{...a,[e.id]:i}}),ee(!0)},[]),ec=(e,t)=>!e&&!t||!!e&&!!t&&e.length===t.length&&e.every((e,a)=>e===t[a]),eu=(0,p.useCallback)((e,t,a,l,n)=>{let i=a?Array.isArray(a)?a:Array.from(a):[];J(a=>{let r=a.filter(t=>!(t.fieldId===e&&ec(t.groupPath,l)&&t.instanceIndex===n));return i.length>0?[...r,{files:i,fieldId:e,fieldDef:t,groupPath:l,instanceIndex:n}]:r}),ee(!0)},[]),ef=(0,p.useCallback)((e,t,a)=>{let l=L.find(l=>l.fieldId===e&&ec(l.groupPath,t)&&l.instanceIndex===a);return(null==l?void 0:l.files)||[]},[L]),ex=(0,p.useCallback)((e,t,a,l,n)=>{eu(e,t,a,l,n)},[eu]),ep=(0,p.useCallback)(e=>{X.mutate(e,{onError:e=>{let t=e instanceof Error?e.message:"Unknown error";(0,G.M8)("Failed to delete file: ".concat(t),{variant:"error"})}})},[X]),{mutate:em}=ei,eb=(0,p.useCallback)(async e=>{var t,a,n,i;null==e||e.preventDefault();let r=er.current;er.current=!1;let o=null!=(a=null==h||null==(t=h.trim())?void 0:t.replace(/\.radtmpl$/i,".radconf"))?a:"";if(!m||!(null==ea?void 0:ea.data)||!P||!o)return;let d={},s=[];for(let e of L){if(!e.files||0===e.files.length)continue;let{fieldId:t,fieldDef:a,groupPath:l,instanceIndex:i,files:r}=e,o="";if(l&&l.length>0&&void 0!==i){let e=l[l.length-1];if(!e)continue;let a=(F[e]||[])[i],n=a?a[t]:void 0;o="string"==typeof n?n.trim():String(null!=n?n:"").trim()}else{let e=_[t];o="string"==typeof e?e.trim():String(null!=e?e:"").trim()}if(!o)continue;let c=Q(String(null!=(n=a.path)?n:""));if("cert_dir"===a.file_type){let e="".concat(c,"/").concat(o);for(let l of(d[t]=e,r)){let e=R(c,a.file_type,o,l.name),t=W.mutateAsync({fileName:e,data:l}).catch(t=>{throw(0,G.M8)("Failed to upload ".concat(e),{variant:"error"}),t});s.push(t)}}else{let e=r[0];if(!e)continue;let l=R(c,a.file_type,o,e.name);d[t]=l;let n=W.mutateAsync({fileName:l,data:e}).catch(e=>{throw(0,G.M8)("Failed to upload ".concat(l),{variant:"error"}),e});s.push(n)}}if(s.length>0&&(await Promise.allSettled(s)).some(e=>"rejected"===e.status))return void(0,G.M8)("One or more file uploads failed",{variant:"error"});if(null==y?void 0:y.items){for(let e of null!=(i=P.items)?i:[])if((0,O.gO)(e)&&"cert_dir"!==e.file_type&&!d[e.id]){for(let t of y.items)if(!("type"in t)&&t.id===e.id){let a=t.extras&&t.extras.filenamePath;"string"==typeof a&&(d[e.id]=a)}}}let c=et(ea.data),u={};for(let[e,t]of Object.entries(F))u[e]=I(t);(()=>{let e=(e,t,a,l)=>{let n=u[e]||[];n[t]&&(n[t][a]=l)};for(let t of L){if(!t.files||0===t.files.length)continue;let{fieldId:a,fieldDef:l,groupPath:n,instanceIndex:i}=t,r=d[a];if(!r)continue;let o=l.filename_id;if("string"==typeof o&&0!==o.length&&n&&n.length>0&&void 0!==i){let t=n[n.length-1];t&&e(t,i,o,r)}}})();let f=((e,t,a,l,n,i,r)=>{var o,d,s,c,u;let f={...l};(null!=(o=null==a?void 0:a.items)?o:[]).filter(e=>"group"===e.type).forEach(e=>{f[e.id]=n[e.id]||[]}),(null!=(d=null==a?void 0:a.items)?d:[]).forEach(e=>{if("file_upload"===e.type){let t=e.filename_id,a=i[e.id];"string"==typeof t&&t.length>0&&a&&(f[t]=a)}});let x=((e,t)=>{let a=e.split("\n"),l=!1,n=0;for(let e=0;e<a.length;e++){var i;if("# radiator-config-template"===((null==(i=a[e])?void 0:i.trim())||""))if(l){n=e+1;break}else l=!0}let r=a.slice(n).join("\n");try{return $().compile(r)(t)}catch(e){return console.error("Failed to compile or render handlebars template:",e),r}})(t,f),p=(null!=(s=null==a?void 0:a.items)?s:[]).map(e=>{if("group"===e.type){var t;return{id:e.id,type:"group",instances:null!=(t=n[e.id])?t:[]}}let a=l[e.id],r={id:e.id,value:void 0!==a?a:"boolean"!==e.type&&("number"===e.type?0:"")};if((0,O.gO)(e)){let t=i[e.id];t&&(r.extras={filenamePath:t})}return r}),m={originalTemplate:{filename:e.filename,checksum:r},items:p},b=[(null!=(c=null==a?void 0:a.items)?c:[]).filter(e=>"group"!==e.type).map(e=>{let t=l[e.id],a=void 0===t||"string"==typeof t&&""===t.trim();if(e.optional&&a)return null;let n=void 0!==t?String(t):"boolean"===e.type?"false":"number"===e.type?"0":"";return"# - ".concat(e.label,": ").concat(n)}).filter(e=>!!e).join("\n"),(null!=(u=null==a?void 0:a.items)?u:[]).filter(e=>"group"===e.type).map(e=>{var t,a;let l=null!=(a=null==(t=n[e.id])?void 0:t.length)?a:0;return"# - ".concat(e.label,": ").concat(l," entr").concat(1===l?"y":"ies")}).join("\n")].filter(e=>e.trim().length>0).join("\n");return"# radiator-interpolated-config-template ".concat(JSON.stringify(m),"\n# NOTE: This file has been automatically generated from a template file at ").concat(e.filename,".\n#\n# The file was generated with the following template values:\n").concat(b,"\n#\n# Any manual changes to the below configuration will be lost if the template values are\n# edited via the management UI. You can disable the management UI template form for\n# this configuration file by removing the radiator-interpolated-config-template comment\n# on the first line.\n\n").concat(x)})(m,ea.data,P,_,u,d,c);em({fileName:o,data:new Blob([f],{type:"text/plain"})},{onSuccess:()=>{"create"===j?(0,G.M8)("Configuration file created from template successfully!",{variant:"success"}):r||(0,G.M8)("Configuration file updated with new template values!",{variant:"success"}),null==g||g(o),ee(!1)},onError:async e=>{let t="An unknown error occurred";await e.response.json().then(e=>{"message"in e?t=e.message:"errors"in e&&(t=e.errors.map(e=>e.causes.join("\n")).join("\n"))}).catch(()=>{t=e.message});let a="Failed to ".concat("create"===j?"create":"update"," configuration file: ").concat(t,"."),n=(0,l.jsx)("span",{className:"whitespace-pre",children:a});console.error(a,f),(0,G.M8)(n,{variant:"error"})}})},[m,ea,P,h,_,F,em,j,W,L,null==y?void 0:y.items,g]),eh=(null==h?void 0:h.trim())&&P&&!ei.isPending;(0,p.useImperativeHandle)(t,()=>({submit:e=>{er.current=!!(null==e?void 0:e.auto),eb()}}),[eb]);let eg=ei.isPending?"create"===j?"Creating...":"Updating...":"create"===j?"Create":"Update";(0,p.useEffect)(()=>{null==S||S({canSubmit:!!eh,submitting:ei.isPending,touched:Z})},[eh,ei.isPending,Z,S]);let ev=(0,l.jsx)(n.default,{size:A?"small":void 0,startIcon:(0,l.jsx)(x.A,{}),type:"submit",variant:"contained",disabled:!eh,children:eg});return m?(0,l.jsx)(i.default,{component:"form",id:A,onSubmit:eb,className:w,children:(0,l.jsxs)(i.default,{className:"flex flex-col gap-4",children:[(null==P?void 0:P.description)&&(0,l.jsx)(r.default,{variant:"body2",color:"text.secondary",children:null==P?void 0:P.description}),(null==m?void 0:m.description)&&"create"!==j&&(0,l.jsx)(r.default,{variant:"body2",color:"text.secondary",children:null==m?void 0:m.description}),el&&(0,l.jsx)(i.default,{className:"flex justify-center p-4",children:(0,l.jsx)(o.A,{})}),en&&(0,l.jsx)(d.A,{severity:"error",children:"Failed to load template content"}),D&&(0,l.jsx)(d.A,{severity:"error",children:D}),T&&(0,l.jsx)(d.A,{severity:"warning",children:"Warning: The original template file has been modified since this configuration was last generated. Some fields may have been added or removed."}),P&&(0,l.jsxs)(i.default,{className:"flex flex-col gap-3",children:[(0,l.jsx)(r.default,{variant:"h6",children:"Template Configuration"}),(null!=(a=null==P?void 0:P.items)?a:[]).map(e=>{if("group"===e.type){let t=F[e.id]||[];return"table"===(e.layout||"form")?(0,l.jsx)(Y,{group:e,instances:t,onRemove:es,onChange:ed},e.id):(0,l.jsx)(B,{group:e,instances:t,onUpdate:t=>{E(a=>({...a,[e.id]:t})),ee(!0)},onTouched:()=>ee(!0),onDeleteFile:ep,getSelectedFiles:ef,setSelectedFiles:(e,t,a,l)=>{let n=(e,t)=>{for(let a of e)if("group"===a.type){let e=n(a.items,t);if(e)return e}else if(a.id===t&&"file_upload"===a.type)return a},i=n((null==P?void 0:P.items)||[],e);i&&ex(e,i,t,a,l)}},e.id)}let t="number"===e.type;if((0,O.cD)(e))return(0,l.jsx)(V,{field:e,value:_[e.id],onChange:t=>eo(e.id,t),onDeleteFile:ep},e.id);if((0,O.gO)(e)){let t=e;if(null==y?void 0:y.items){var a;let l=y.items.find(t=>!("type"in t)&&t.id===e.id),n=l&&"string"==typeof(null==(a=l.extras)?void 0:a.filenamePath)?l.extras.filenamePath:void 0;n&&(t={...e,_persistedFilePath:n})}return(0,l.jsx)(V,{field:t,value:_[e.id],onChange:t=>eo(e.id,t),onDeleteFile:ep,selectedFiles:ef(e.id),onSelectFiles:t=>eu(e.id,e,t)},e.id)}return(0,l.jsxs)(i.default,{children:["boolean"===e.type?(0,l.jsx)(s.A,{control:(0,l.jsx)(c.A,{checked:!!_[e.id],onChange:t=>eo(e.id,t.target.checked)}),label:e.label}):(0,l.jsx)(u.A,{label:e.label,type:"password"===e.type?"password":t?"number":"text",value:void 0===_[e.id]?"":String(_[e.id]),onChange:t=>eo(e.id,t.target.value),placeholder:(()=>{let t=N(e);return void 0!==t?String(t):void 0})(),helperText:e.description,fullWidth:!0,required:!0,slotProps:{htmlInput:t?{step:"1",min:"0",inputMode:"numeric"}:void 0}}),"boolean"===e.type&&e.description&&(0,l.jsx)(r.default,{variant:"caption",color:"text.secondary",className:"ml-8 block",children:e.description})]},e.id)})]}),P&&!A&&(0,l.jsxs)(f.A,{children:[v&&(0,l.jsx)(n.default,{onClick:v,variant:"outlined",children:"Cancel"}),ev]})]})}):(0,l.jsx)(i.default,{className:w,children:(0,l.jsx)(r.default,{color:"text.secondary",children:"No template selected"})})})},48606:(e,t,a)=>{a.d(t,{cD:()=>A,gO:()=>w,iV:()=>_,qS:()=>S});var l=a(70303),n=a(20556);let i="# radiator-interpolated-config-template",r=n.k5(["cert","ca","ca_cert","key","cert_dir"]),o=n.Ik({id:n.Yj(),label:n.Yj(),description:n.Yj().optional(),type:n.eu("string"),placeholder:n.Yj().optional()}),d=n.Ik({id:n.Yj(),label:n.Yj(),description:n.Yj().optional(),type:n.eu("password"),placeholder:n.Yj().optional()}),s=n.Ik({id:n.Yj(),label:n.Yj(),description:n.Yj().optional(),type:n.eu("boolean"),placeholder:n.zM().optional()}),c=n.Ik({id:n.Yj(),label:n.Yj(),description:n.Yj().optional(),type:n.eu("number"),placeholder:n.ai().optional()}),u=n.Ik({id:n.Yj(),label:n.Yj(),description:n.Yj().optional(),type:n.eu("file_upload"),file_type:r,path:n.Yj(),filename_id:n.Yj().optional()}),f=n.Ik({id:n.Yj(),label:n.Yj(),description:n.Yj().optional(),type:n.eu("file_ref"),file_type:r,path:n.Yj(),optional:n.zM().optional()}),x=n.KC([o,d,s,c,u,f]),p=n.RZ(()=>n.Ik({id:n.Yj(),label:n.Yj(),description:n.Yj().optional(),type:n.eu("group"),min:n.ai().int().min(0).optional(),max:n.ai().int().min(0).optional(),layout:n.k5(["form","table"]).optional(),items:n.YO(n.KC([x,p]))})),m=n.KC([x,p]),b=n.Ik({description:n.Yj(),items:n.YO(m)}).optional(),h=n.KC([n.Yj(),n.zM(),n.ai()]),g=n.RZ(()=>n.g1(n.Yj(),n.KC([h,n.YO(g)]))),v=n.Ik({id:n.Yj(),value:h,extras:n.g1(n.Yj(),n.L5()).optional()}),y=n.Ik({id:n.Yj(),type:n.eu("group"),instances:n.YO(g)}),j=n.Ik({originalTemplate:n.Ik({filename:n.Yj(),checksum:n.Yj()}),items:n.YO(n.KC([v,y]))}).optional(),w=e=>"file_upload"===e.type,A=e=>"file_ref"===e.type;function S(e){var t;let a=function(e){let t=e.split("\n"),a=!1,l=[];for(let e of t){let t=e.trim();if("# radiator-config-template"===t){if(a)break;a=!0;continue}a&&(""===t||t.startsWith("#")||l.push(e))}return 0===l.length?null:l.join("\n")}(e);return a?null!==(t=(0,l.e_)(a,b,"template metadata"))&&void 0!==t?t:null:null}function _(e){var t,a;let n=e.trim();if(!n.startsWith(i))return null;let r=null==(t=n.split(i)[1])?void 0:t.trim();return r?null!==(a=(0,l.e_)(r,j,"interpolated config metadata"))&&void 0!==a?a:null:null}},50927:(e,t,a)=>{a.d(t,{KD:()=>v,RS:()=>w,V5:()=>N,a7:()=>A,aA:()=>I,hY:()=>o,ie:()=>m,lL:()=>C,qn:()=>b,sP:()=>s,v0:()=>h,vz:()=>u});var l=a(89489),n=a(99776),i=a(80549);let r=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="configuration/dir",l=""===t?"".concat(a):"".concat(a,"/").concat(encodeURIComponent(t));return await e.get(l).json()},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,l.V8)(["configuration/dir",e],t=>r(t,e),{enabled:null==t?void 0:t.enabled})},d=async(e,t)=>await e.get("configuration/file/".concat(t)).json(),s=e=>(0,l.V8)(["configuration/file",e],t=>d(t,e),{refetch:!1}),c=async(e,t)=>{let a=Array.isArray(t)?t:[t],l=new FormData;for(let e of a){let t="string"==typeof e.data?new Blob([e.data],{type:"text/plain"}):e.data,a=e.fileName.split("/").pop()||"file";l.append(e.fileName,t,a)}let n=await e.put("configuration/file",{body:l}).json(),i=n.results.filter(e=>!e.success);if(i.length>0){let e=i.map(e=>"".concat(e.fileName,": ").concat(e.message||"Upload failed")).join(", ");throw Error("Upload failed for files: ".concat(e))}return n},u=e=>{let t=(0,l.JN)(!0),a=(0,n.jE)();return(0,i.n)({mutationFn:e=>c(t,e),onSuccess:async()=>{var t;(null==e?void 0:e.resetFileQuery)?await a.resetQueries({queryKey:["configuration/file"]}):await a.invalidateQueries({queryKey:["configuration/file"]}),await a.invalidateQueries({queryKey:["configuration/dir"]}),await a.invalidateQueries({queryKey:["configuration/pending/status"]}),null==e||null==(t=e.onSuccess)||t.call(e)}})},f=async(e,t)=>await e.delete("configuration/file/".concat(t)).json(),x=async(e,t,a)=>await e.post("configuration/file-operations/rename",{json:{from:t,to:a}}).json(),p=async(e,t,a)=>await e.post("configuration/file-operations/duplicate",{json:{source:t,destination:a}}).json(),m=()=>{let e=(0,l.JN)(),t=(0,n.jE)();return(0,i.n)({mutationFn:async t=>await f(e,t),onSuccess:async()=>{await t.invalidateQueries({queryKey:["configuration/dir"]}),await t.invalidateQueries({queryKey:["configuration/pending/status"]})}})},b=()=>{let e=(0,l.JN)(!0),t=(0,n.jE)();return(0,i.n)({mutationFn:t=>x(e,t.from,t.to),onSuccess:async()=>{await t.invalidateQueries({queryKey:["configuration/dir"]}),await t.invalidateQueries({queryKey:["configuration/pending/status"]})}})},h=()=>{let e=(0,l.JN)(!0),t=(0,n.jE)();return(0,i.n)({mutationFn:t=>p(e,t.source,t.destination),onSuccess:async()=>{await t.invalidateQueries({queryKey:["configuration/dir"]}),await t.invalidateQueries({queryKey:["configuration/pending/status"]})}})},g=async(e,t)=>await e.post("configuration/test",{json:t}).json(),v=()=>{let e=(0,l.JN)(!0);return(0,i.n)({mutationFn:t=>g(e,t),mutationKey:["configuration/test"]})},y=async(e,t)=>await e.post("configuration/dir/".concat(t),{json:{}}).json(),j=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return await e.delete("configuration/dir/".concat(t).concat(a?"?force=true":"")).json()},w=e=>{let t=(0,l.JN)(!0),a=(0,n.jE)();return(0,i.n)({mutationFn:e=>y(t,e),onSuccess:async()=>{var t;await a.invalidateQueries({queryKey:["configuration/dir"]}),await a.invalidateQueries({queryKey:["configuration/pending/status"]}),null==e||null==(t=e.onSuccess)||t.call(e)}})},A=e=>{let t=(0,l.JN)(!0),a=(0,n.jE)();return(0,i.n)({mutationFn:e=>{var a;return j(t,e.path,null!=(a=e.force)&&a)},onSuccess:async()=>{var t;await a.invalidateQueries({queryKey:["configuration/dir"]}),await a.invalidateQueries({queryKey:["configuration/pending/status"]}),null==e||null==(t=e.onSuccess)||t.call(e)}})},S=async(e,t,a)=>await e.post("configuration/file-operations/rename",{json:{from:t,to:a}}).json(),_=async(e,t,a)=>await e.post("configuration/file-operations/duplicate",{json:{source:t,destination:a}}).json(),N=()=>{let e=(0,l.JN)(!0),t=(0,n.jE)();return(0,i.n)({mutationFn:t=>S(e,t.from,t.to),onSuccess:async()=>{await t.invalidateQueries({queryKey:["configuration/dir"]}),await t.invalidateQueries({queryKey:["configuration/pending/status"]})}})},k=async(e,t)=>{let a=new FormData;a.append("file",t.file,t.file.name);let l=t.overwrite?"?overwrite=true":"";return await e.post("configuration/import".concat(l),{body:a}).json()},C=e=>{let t=(0,l.JN)(!0),a=(0,n.jE)();return(0,i.n)({mutationFn:e=>k(t,e),onSuccess:async()=>{var t;await a.invalidateQueries({queryKey:["configuration/pending/status"]}),await a.invalidateQueries({queryKey:["configuration/dir"]}),await a.resetQueries({queryKey:["configuration/file"]}),null==e||null==(t=e.onSuccess)||t.call(e)}})},I=()=>{let e=(0,l.JN)(!0),t=(0,n.jE)();return(0,i.n)({mutationFn:t=>_(e,t.source,t.destination),onSuccess:async()=>{await t.invalidateQueries({queryKey:["configuration/dir"]}),await t.invalidateQueries({queryKey:["configuration/pending/status"]})}})}},70303:(e,t,a)=>{a.d(t,{Iy:()=>d,T3:()=>s,e_:()=>o,vf:()=>c});var l=a(20556);let n=l.g1(l.Yj(),l.L5()).optional(),i=l.Ik({message:l.Yj().optional()}).catchall(l.L5()).optional(),r=l.g1(l.Yj(),l.L5()).optional();function o(e,t,a){try{let n=l.vk((e,t)=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){t.addIssue({code:"custom",message:e.message})}return e},t).safeParse(e);if(n.success)return n.data;throw Error("Error while parsing JSON to ".concat(a,":\n\n").concat(n.error,"\n\nInput: ").concat(e))}catch(e){return}}let d=e=>o(e,n,"log entry"),s=e=>o(e,i,"HTTP error response"),c=e=>o(e,r,"DataGrid state")},74406:(e,t,a)=>{a.d(t,{store:()=>l});let l=(0,a(80074).y$)()},89134:(e,t,a)=>{a.d(t,{R9:()=>i,c_:()=>o});var l=a(89489);let n=async e=>await e.get("configuration/template").json(),i=()=>(0,l.V8)(["configuration/template"],n),r=async(e,t)=>await e.get("configuration/template/".concat(t)).json(),o=e=>(0,l.V8)(["configuration/template",e],t=>r(t,e),{refetch:!1})},89489:(e,t,a)=>{a.d(t,{DB:()=>g,JN:()=>k,Ot:()=>A,PP:()=>C,V8:()=>S,Vw:()=>_,ed:()=>j,en:()=>v,tt:()=>w});var l=a(53455),n=a(34049),i=a(99776),r=a(67364),o=a(89460),d=a(77202),s=a(51208),c=a(12115),u=a(70303),f=a(99686),x=a(74406),p=a(9617);let m=(0,s.tG)("CurrentUser",void 0,(0,s.KU)(()=>localStorage)),b=(0,s.tG)("LoginBaseUrl","/api/v1"),h=(0,s.tG)("AutoRefresh",!0),g=()=>{let e=(0,d.useAtomValue)(m);return"docs"!==p.tR&&void 0!==e},v=()=>(0,d.useSetAtom)(m),y=()=>{let e=(0,d.useAtomValue)(m);return"docs"!==p.tR&&e},j=()=>(0,d.useAtom)(b),w=()=>(0,d.useAtomValue)(h),A=()=>(0,d.useSetAtom)(h),S=(e,t,a)=>{var i,r,o;let d=!!y(),s=null==(i=null==a?void 0:a.enabled)||i,c=d&&s,u=w(),f=k(null==a?void 0:a.disableHooks),x=u&&!!(null==(r=null==a?void 0:a.refetch)||r),p=null!=(o=null==a?void 0:a.refetchInterval)?o:1e4,m=(0,l.I)({queryKey:e,queryFn:()=>t(f),refetchInterval:x?p:void 0,refetchOnWindowFocus:x,placeholderData:(null==a?void 0:a.keepPreviousData)?n.rX:void 0,enabled:c});return c||(m={...m,isLoading:!0}),m},_=(e,t,a,l)=>{var n,o;let d=(0,i.jE)(),s=y(),u=w()&&!!(null==(n=null==l?void 0:l.refetch)||n),f=null!=(o=null==l?void 0:l.refetchInterval)?o:1e4,x=!!s,p=k(null==l?void 0:l.disableHooks),m=(0,r.q)({queryKey:e,queryFn:e=>{let{pageParam:a}=e;return t(p,a)},initialPageParam:void 0,getNextPageParam:a,refetchInterval:u?f:void 0,enabled:x,staleTime:1/0});x||(m={...m,isLoading:!0}),(0,c.useEffect)(()=>{if(!u)return;let t=setInterval(async()=>{x&&!m.isFetchingNextPage&&(await m.fetchNextPage(),d.setQueryData(e,e=>{var t;let a=[...e?e.pages:[]],l=[...e?e.pageParams:[]];return(null==(t=a.at(-1))?void 0:t.length)===0&&(a.pop(),l.pop()),{pages:a,pageParams:l}}))},1e3);return()=>clearInterval(t)},[m.fetchNextPage,m.isFetchingNextPage,x,m,d,s,u,e]);let b=(0,c.useMemo)(()=>{var e,t;return null!=(t=null==(e=m.data)?void 0:e.pages.flat())?t:[]},[m.data]);return{...m,data:b}},N=(e,t)=>function(){for(var a=arguments.length,l=Array(a),n=0;n<a;n++)l[n]=arguments[n];let[i,r]=l,o=null!=r?r:{},d=void 0!==o.json||void 0!==o.body;return t.call(e,i,d?o:{...o,json:{}})},k=e=>((e,t)=>{let a=o.Ay.extend({prefixUrl:e,credentials:"include",hooks:{beforeError:t?[]:[async e=>{var t,a,l;let n=e.message,i=null!=(t=e.response.headers.get("X-Context-Id"))?t:"<no ctx id>",r=await e.response.text().catch(()=>null),o=r?(0,u.T3)(r):null,d=null!=(l=null!=(a=null==o?void 0:o.message)?a:null==r?void 0:r.slice(0,500))?l:"";return r&&(e.body=r),o&&(e.json=o),401===e.response.status?((0,f.z)("You are not authenticated, please login again."),x.store.set(m,void 0)):"GET"===e.request.method?(0,f.z)("Error while fetching data with ".concat(i,", retrying...\n").concat(n,"\n").concat(d)):(0,f.z)("HTTP request error with ".concat(i,":\n").concat(n,"\n").concat(d)),e}]}});return a.post=N(a,a.post),a.put=N(a,a.put),a})((0,d.useAtomValue)(b),e),C=e=>"".concat(p.o2).concat(e)},99686:(e,t,a)=>{a.d(t,{z:()=>r});var l=a(71991);let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0xdeadbeef^t,l=0x41c6ce57^t;for(let t=0,n;t<e.length;t++)a=Math.imul(a^(n=e.charCodeAt(t)),0x9e3779b1),l=Math.imul(l^n,0x5f356495);return a=Math.imul(a^a>>>16,0x85ebca6b)^Math.imul(l^l>>>13,0xc2b2ae35),(l=Math.imul(l^l>>>16,0x85ebca6b)^Math.imul(a^a>>>13,0xc2b2ae35)).toString(36).padStart(7,"0")+a.toString(36).padStart(7,"0")},i=new Map,r=(e,t)=>{var a;console.error(e);let r=n(null!=t?t:e),o=null!=(a=i.get(r))?a:0;Date.now()-o<12e4||(i.set(r,Date.now()),(0,l.M8)({message:e,variant:"error",autoHideDuration:15e3,style:{whiteSpace:"pre-line"}}))}}}]);