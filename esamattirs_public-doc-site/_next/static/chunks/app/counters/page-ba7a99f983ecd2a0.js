(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2414],{3651:(e,t,r)=>{"use strict";r.d(t,{DP:()=>i,K7:()=>u,S2:()=>o,gZ:()=>s,yI:()=>c});var a=r(89489),n=r(12115);let l=async e=>await e.get("statistics/all-counters").json(),i=()=>(0,a.V8)(["counters"],l),s=e=>{let{data:t,...r}=i(),a=(0,n.useMemo)(()=>(t||[]).filter(t=>{let[r,a]=t;return void 0===e||u(a.group)===e}).map(e=>{let[t,r]=e;return[t,r]}),[t,e]);return{...r,counterGroups:a}},o=e=>{let{data:t,...r}=i(),a=(0,n.useMemo)(()=>{if(t&&e)return t.find(t=>{let[r,a]=t;return r.length===e.length&&r.every((t,r)=>t===e[r])})},[t,e]);return{...r,counter:a?a[1]:void 0,namespace:a?a[0]:void 0}},u=e=>"string"==typeof e?e:"Backend"in e?"Backend":"Policy"in e?"Policy":"Server"in e?"Server":"Handler"in e?"Handler":"Unknown",c=(e,t)=>e.reduce((e,r)=>{let[a,n]=r;if(u(n.group)!==t)return e;let l={...e};for(let[e,t]of n.values){var i;let r=Number(t);l[e]=(null!=(i=l[e])?i:0)+r}return l},{})},7768:(e,t,r)=>{"use strict";r.d(t,{qo:()=>p,rE:()=>d});var a=r(95155),n=r(87403),l=r(24049),i=r(53525),s=r(34471),o=r(98487),u=r(10507),c=r(9232);function d(e){let{id:t,color:r}=e;return(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"__chart-color-palette-".concat(t),gradientTransform:"rotate(90)",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:r,stopOpacity:.25}),(0,a.jsx)("stop",{offset:"95%",stopColor:r,stopOpacity:0})]})})}let m=[l.A[400],n.bH,i.A[400],s.A[400],o.A[400],n.yG,u.A[400],c.A[400]],p=(e,t)=>{let r=e.split("-");switch(r[r.length-1]){case"Accept":case"Replies":return n.yG;case"Sessions":case"Requests":return u.A[400];case"Timeouts":case"NoReply":return n.bH;case"Reject":return o.A[400];case"NoHandler":case"NoAvailableConnections":return s.A[400];case"Errors":case"Error":return c.A[400];default:var a;return null!=(a=m[t%m.length])?a:n.bH}}},9620:(e,t,r)=>{"use strict";r.d(t,{O:()=>a,W:()=>n});let a=e=>e.join("::"),n=e=>e.split("::").filter(e=>e.length>0)},37359:(e,t,r)=>{"use strict";r.d(t,{BV:()=>l,fp:()=>a,lR:()=>i,xY:()=>s});function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxSigDigits:r=3,spaceBetween:a=!0}=t,{value:n,unit:l}=!Number.isFinite(e)||e<=0?{value:0,unit:"\xb5s",divisor:1}:e>=864e8?{value:e/864e8,unit:"d",divisor:864e8}:e>=36e8?{value:e/36e8,unit:"h",divisor:36e8}:e>=6e7?{value:e/6e7,unit:"min",divisor:6e7}:e>=1e6?{value:e/1e6,unit:"s",divisor:1e6}:e>=1e3?{value:e/1e3,unit:"ms",divisor:1e3}:{value:e,unit:"\xb5s",divisor:1},i=function(e,t){if(!Number.isFinite(e)||0===e)return"0";let r=Math.abs(e);if(r>=1){let a=Math.max(0,t-(Math.floor(Math.log10(r))+1));return e.toFixed(a).replace(/\.?0+$/,"")}return e.toPrecision(t).replace(/\.?0+$/,"")}(n,r);return a?"".concat(i," ").concat(l):"".concat(i).concat(l)}function n(e){return!Number.isFinite(e)||e<=0?{unit:"\xb5s",divisor:1,max:0}:e>=864e8?{unit:"d",divisor:864e8,max:e}:e>=36e8?{unit:"h",divisor:36e8,max:e}:e>=6e7?{unit:"min",divisor:6e7,max:e}:e>=1e6?{unit:"s",divisor:1e6,max:e}:e>=1e3?{unit:"ms",divisor:1e3,max:e}:{unit:"\xb5s",divisor:1,max:e}}function l(e){if(!e||0===e.length)return n(0);let t=0;for(let r of e)"number"==typeof r&&r>t&&(t=r);return n(t)}function i(e){return t=>{let r,a="number"==typeof t?t:Number(t);if(!Number.isFinite(a))return"0 ".concat(e.unit);let n=a/e.divisor;if(0===n)return"0 ".concat(e.unit);let l=Math.abs(n);if(l>=1){let e=Math.max(0,3-(Math.floor(Math.log10(l))+1));r=n.toFixed(e)}else r=n.toPrecision(3);return r.includes(".")&&(r=r.replace(/\.?0+$/,"").replace(/\.$/,"")),"".concat(r," ").concat(e.unit)}}function s(e){return"Time spent (".concat(e.unit,")")}},42634:()=>{},60149:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var a=r(95155),n=r(12115),l=r(29767),i=r(2821);let s=n.forwardRef(function(e,t){let{className:r,...n}=e;return(0,a.jsx)("div",{className:"overflow-y-visible",children:(0,a.jsx)(l.default,{ref:t,className:(0,i.A)(r,"overflow-x-auto"),...n})})});s.displayName="OverflowingCard"},61990:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var a=r(95155),n=r(3651),l=r(84938),i=r(9620),s=r(20699),o=r(51074),u=r(27016),c=r.n(u),d=r(7768),m=r(61326),p=r(52619),v=r.n(p),f=r(37359);let h=(0,m.tv)({base:"shrink-0 overflow-hidden text-ellipsis",variants:{data:{compact:"p-2 w-[125px] gap-2 items-center text-sm",normal:"p-3 w-[160px] gap-2 items-center"},heading:{compact:"p-3 w-[160px] text-sm",normal:"p-3 w-[300px]"}}}),g=e=>{let t=(0,n.gZ)(e.type),{timeseries:r,isLoading:u}=(0,l.W)(t.counterGroups,!1),m=Object.entries(c()(t.counterGroups,e=>{let[t,r]=e;return(0,n.K7)(r.group)})).map(n=>{var l;let[c,m]=n;return(0,a.jsxs)("div",{className:"pb-12 last:pb-0",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:h({heading:e.compact?"compact":"normal"}),children:"Counter name"}),null==(l=m[0])?void 0:l[1].values.filter(e=>{let[t]=e;return"Sessions"!==t}).map(t=>{let[r]=t;return(0,a.jsx)("div",{className:h({data:e.compact?"compact":"normal"}),title:r,children:"Custom"===c?"Value":r},r)})]}),(0,a.jsx)("div",{children:t.isLoading?null:m.map(t=>{let[n,l]=t,c=(0,i.O)(n);return(0,a.jsxs)(v(),{href:"/counters/details?id=".concat(encodeURIComponent(c)),style:{color:"inherit"},className:"flex flex-1 no-underline transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-700 border-0 border-solid border-b first:border-t border-neutral-300 dark:border-neutral-700 items-center text-nowrap",children:[(0,a.jsx)("div",{className:h({heading:e.compact?"compact":"normal"}),title:c,children:c}),l.values.filter(e=>{let[t]=e;return"Sessions"!==t}).map((t,n)=>{var l,i,m,p;let[v,g]=t,x=null!=(i=r[c])?i:{},b=null!=(m=null==(l=x[v])?void 0:l.reduce((e,t)=>e+t.value,0))?m:0,y=e=>{if("TimeSpent"===v)return(0,f.fp)(e);let t=e,r=["","K","M","G","T","P"],a=0;for(;t>=1e3&&a<r.length-1;)t/=1e3,a++;let n=Math.max(0,3-(Math.floor(Math.log10(Math.abs(t)||1))+1)),l=t.toFixed(n).replace(/\.?0+$/,"");return"".concat(l," ").concat(r[a]).trim()},w=(0,d.qo)(v,n),j=function(e){var t,r,a;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(e)||0===e.length)return[];let l=null!=(t=n.now)?t:Date.now(),i=null!=(r=n.maxPoints)?r:200,s=null!=(a=n.windowMs)?a:864e5;if(i<=0)return[];let o=l-s,u=e.filter(e=>e.timestamp instanceof Date&&e.timestamp.getTime()>=o);if(u.length<=i)return u;let c=Math.ceil(u.length/i),d=[];for(let e=0;e<u.length;e+=c){let t=u.slice(e,e+c),r=0;for(let e of t)r+=e.value;let a=r/t.length;if(0===t.length)continue;let n=Math.floor(t.length/2),l=t[n];d.push({timestamp:l.timestamp,value:a})}return d}(null!=(p=x[v])?p:[]);return(0,a.jsxs)("div",{title:v,className:h({className:"flex",data:e.compact?"compact":"normal"}),children:[(0,a.jsxs)("div",{className:"w-[64px] h-[32px] -ml-1 items-center flex",children:[!u&&(0,a.jsx)(o.E,{data:j.map(e=>e.value),height:32,colors:[w]}),u&&(0,a.jsx)(s.default,{className:"w-[64px] h-[32px]"})]}),(0,a.jsx)("div",{title:y(b),children:"TimeSpent"===v?y(b):null!=b?b:0})]},v)})]},c)})})]},c)});return(0,a.jsx)("div",{className:"w-full overflow-x-auto grid",children:m})}},66155:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});let a=()=>"/doc-pages/esamattirs_public-doc-site"},70303:(e,t,r)=>{"use strict";r.d(t,{Iy:()=>o,T3:()=>u,e_:()=>s,vf:()=>c});var a=r(20556);let n=a.g1(a.Yj(),a.L5()).optional(),l=a.Ik({message:a.Yj().optional()}).catchall(a.L5()).optional(),i=a.g1(a.Yj(),a.L5()).optional();function s(e,t,r){try{let n=a.vk((e,t)=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){t.addIssue({code:"custom",message:e.message})}return e},t).safeParse(e);if(n.success)return n.data;throw Error("Error while parsing JSON to ".concat(r,":\n\n").concat(n.error,"\n\nInput: ").concat(e))}catch(e){return}}let o=e=>s(e,n,"log entry"),u=e=>s(e,l,"HTTP error response"),c=e=>s(e,i,"DataGrid state")},74406:(e,t,r)=>{"use strict";r.d(t,{store:()=>a});let a=(0,r(80074).y$)()},79536:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});var a=r(20556);let n=a.KC([a.eu("management"),a.eu("docs")]).optional().default("management").parse("docs")},82238:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(95155);r(12115);var n=r(61990),l=r(60149),i=r(25957),s=r(84578);let o=()=>(0,a.jsxs)(l.T,{children:[(0,a.jsx)(i.default,{title:"All counters"}),(0,a.jsx)(s.default,{className:"flex flex-col gap-12",children:(0,a.jsx)(n.A,{})})]})},84938:(e,t,r)=>{"use strict";r.d(t,{W:()=>o});var a=r(89489),n=r(9620),l=r(11515),i=r(12115);let s=async(e,t,r)=>{let a=t.join("/"),n=await e.get("string"==typeof r?"statistics/counter/time-series/".concat(a):"statistics/counters/time-series/".concat(a)).json(),l=n.map(e=>({...e,timestamp:new Date(e.timestamp)}));return n.flatMap((e,t)=>{let r,a=l[t-1];if(!a)return[];if(Array.isArray(e.value)){let t=Array.isArray(a.value)?a.value:[a.value];r=e.value.map((e,r)=>{var a;return e-(null!=(a=t[r])?a:0)})}else if("number"==typeof e.value&&"number"==typeof a.value)r=e.value-a.value;else throw Error("Mixed number and array types detected in timeseries reply");return[{timestamp:new Date(e.timestamp),value:r}]})},o=(e,t)=>{let r=(0,a.JN)(),o=(0,a.tt)(),u=(0,l.E)({queries:e.map(e=>{let[t,a]=e;return{queryKey:["timeseries",...t],queryFn:()=>s(r,t,a.group),refetchInterval:o?6e4:void 0}})}),c=u.some(e=>e.isLoading),d=u.some(e=>e.isError);return{timeseries:(0,i.useMemo)(()=>Object.fromEntries(e.map((e,r)=>{let[a,l]=e,i=u[r],s=(0,n.O)(a);return[s,Object.fromEntries(l.values.map((e,r)=>{var a;let[n]=e;return[t?"".concat(s,"-").concat(n):n,(null!=(a=null==i?void 0:i.data)?a:[]).map(e=>{var t;return{...e,value:"number"==typeof e.value?e.value:null!=(t=e.value[r])?t:0}})]}))]})),[e,u,t]),isLoading:c,isError:d}}},87403:(e,t,r)=>{"use strict";r.d(t,{_k:()=>c,a5:()=>u,bH:()=>o,yG:()=>s});var a=r(7032),n=r.n(a),l=r(70622);let i={typography:{fontFamily:n().style.fontFamily},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.025), rgba(255, 255, 255, 0.015));"}}}}},s="#24b073",o="#eeb942",u=(0,l.A)({palette:{mode:"dark",primary:{main:s},secondary:{main:o},background:{default:"#131313",paper:"#181818"}},canvasChart:{gridColor:"rgba(255, 255, 255, 0.1)"},...i}),c=(0,l.A)({palette:{mode:"light",primary:{main:s},secondary:{main:o},background:{default:"#f4f2f2",paper:"#f4f2f2"}},canvasChart:{gridColor:"rgba(0, 0, 0, 0.1)"},...i})},89489:(e,t,r)=>{"use strict";r.d(t,{DB:()=>b,JN:()=>E,Ot:()=>N,PP:()=>S,V8:()=>M,Vw:()=>P,ed:()=>j,en:()=>y,tt:()=>A});var a=r(53455),n=r(34049),l=r(99776),i=r(67364),s=r(89460),o=r(77202),u=r(51208),c=r(12115),d=r(70303),m=r(99686),p=r(74406),v=r(66155),f=r(79536);let h=(0,u.tG)("CurrentUser",void 0,(0,u.KU)(()=>localStorage)),g=(0,u.tG)("LoginBaseUrl","/api/v1"),x=(0,u.tG)("AutoRefresh",!0),b=()=>{let e=(0,o.useAtomValue)(h);return"docs"!==f.t&&void 0!==e},y=()=>(0,o.useSetAtom)(h),w=()=>{let e=(0,o.useAtomValue)(h);return"docs"!==f.t&&e},j=()=>(0,o.useAtom)(g),A=()=>(0,o.useAtomValue)(x),N=()=>(0,o.useSetAtom)(x),M=(e,t,r)=>{var l,i,s;let o=!!w(),u=null==(l=null==r?void 0:r.enabled)||l,c=o&&u,d=A(),m=E(null==r?void 0:r.disableHooks),p=d&&!!(null==(i=null==r?void 0:r.refetch)||i),v=null!=(s=null==r?void 0:r.refetchInterval)?s:1e4,f=(0,a.I)({queryKey:e,queryFn:()=>t(m),refetchInterval:p?v:void 0,refetchOnWindowFocus:p,placeholderData:(null==r?void 0:r.keepPreviousData)?n.rX:void 0,enabled:c});return c||(f={...f,isLoading:!0}),f},P=(e,t,r,a)=>{var n,s;let o=(0,l.jE)(),u=w(),d=A()&&!!(null==(n=null==a?void 0:a.refetch)||n),m=null!=(s=null==a?void 0:a.refetchInterval)?s:1e4,p=!!u,v=E(null==a?void 0:a.disableHooks),f=(0,i.q)({queryKey:e,queryFn:e=>{let{pageParam:r}=e;return t(v,r)},initialPageParam:void 0,getNextPageParam:r,refetchInterval:d?m:void 0,enabled:p,staleTime:1/0});p||(f={...f,isLoading:!0}),(0,c.useEffect)(()=>{if(!d)return;let t=setInterval(async()=>{p&&!f.isFetchingNextPage&&(await f.fetchNextPage(),o.setQueryData(e,e=>{var t;let r=[...e?e.pages:[]],a=[...e?e.pageParams:[]];return(null==(t=r.at(-1))?void 0:t.length)===0&&(r.pop(),a.pop()),{pages:r,pageParams:a}}))},1e3);return()=>clearInterval(t)},[f.fetchNextPage,f.isFetchingNextPage,p,f,o,u,d,e]);let h=(0,c.useMemo)(()=>{var e,t;return null!=(t=null==(e=f.data)?void 0:e.pages.flat())?t:[]},[f.data]);return{...f,data:h}},k=(e,t)=>function(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];let[l,i]=a,s=null!=i?i:{},o=void 0!==s.json||void 0!==s.body;return t.call(e,l,o?s:{...s,json:{}})},E=e=>((e,t)=>{let r=s.Ay.extend({prefixUrl:e,credentials:"include",hooks:{beforeError:t?[]:[async e=>{var t,r,a;let n=e.message,l=null!=(t=e.response.headers.get("X-Context-Id"))?t:"<no ctx id>",i=await e.response.text().catch(()=>null),s=i?(0,d.T3)(i):null,o=null!=(a=null!=(r=null==s?void 0:s.message)?r:null==i?void 0:i.slice(0,500))?a:"";return i&&(e.body=i),s&&(e.json=s),401===e.response.status?((0,m.z)("You are not authenticated, please login again."),p.store.set(h,void 0)):"GET"===e.request.method?(0,m.z)("Error while fetching data with ".concat(l,", retrying...\n").concat(n,"\n").concat(o)):(0,m.z)("HTTP request error with ".concat(l,":\n").concat(n,"\n").concat(o)),e}]}});return r.post=k(r,r.post),r.put=k(r,r.put),r})((0,o.useAtomValue)(g),e),S=e=>"".concat((0,v.D)()).concat(e)},95861:(e,t,r)=>{Promise.resolve().then(r.bind(r,82238))},99686:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var a=r(71991);let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0xdeadbeef^t,a=0x41c6ce57^t;for(let t=0,n;t<e.length;t++)r=Math.imul(r^(n=e.charCodeAt(t)),0x9e3779b1),a=Math.imul(a^n,0x5f356495);return r=Math.imul(r^r>>>16,0x85ebca6b)^Math.imul(a^a>>>13,0xc2b2ae35),(a=Math.imul(a^a>>>16,0x85ebca6b)^Math.imul(r^r>>>13,0xc2b2ae35)).toString(36).padStart(7,"0")+r.toString(36).padStart(7,"0")},l=new Map,i=(e,t)=>{var r;console.error(e);let i=n(null!=t?t:e),s=null!=(r=l.get(i))?r:0;Date.now()-s<12e4||(l.set(i,Date.now()),(0,a.M8)({message:e,variant:"error",autoHideDuration:15e3,style:{whiteSpace:"pre-line"}}))}}},e=>{e.O(0,[2864,9140,4854,870,4614,2619,4173,8368,3501,8441,1255,7358],()=>e(e.s=95861)),_N_E=e.O()}]);