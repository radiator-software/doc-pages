(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{3713:(e,t,l)=>{"use strict";l.d(t,{default:()=>i});var a=l(36697),s=l(95155);let i=(0,a.A)((0,s.jsx)("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"}),"OpenInFull")},7768:(e,t,l)=>{"use strict";l.d(t,{qo:()=>h,rE:()=>u});var a=l(95155),s=l(87403),i=l(24049),n=l(53525),r=l(34471),o=l(98487),d=l(10507),c=l(9232);function u(e){let{id:t,color:l}=e;return(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"__chart-color-palette-".concat(t),gradientTransform:"rotate(90)",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:l,stopOpacity:.25}),(0,a.jsx)("stop",{offset:"95%",stopColor:l,stopOpacity:0})]})})}let m=[i.A[400],s.bH,n.A[400],r.A[400],o.A[400],s.yG,d.A[400],c.A[400]],h=(e,t)=>{let l=e.split("-");switch(l[l.length-1]){case"Accept":case"Replies":return s.yG;case"Sessions":case"Requests":return d.A[400];case"Timeouts":case"NoReply":return s.bH;case"Reject":return o.A[400];case"NoHandler":case"NoAvailableConnections":return r.A[400];case"Errors":case"Error":return c.A[400];default:var a;return null!=(a=m[t%m.length])?a:s.bH}}},13777:(e,t,l)=>{"use strict";l.d(t,{F:()=>d});var a=l(95155),s=l(23820),i=l(73707),n=l(49501),r=l(22822),o=l(17681);let d=e=>{var t;let l="ListItemCheckboxLabel-".concat(e.id);return(0,a.jsx)(s.default,{disableGutters:null==(t=e.disableGutters)||t,children:(0,a.jsxs)(i.default,{role:void 0,onClick:e.onToggle,children:[(0,a.jsx)(n.A,{children:(0,a.jsx)(r.A,{edge:"start",checked:e.checked,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":l},indeterminate:e.indeterminate})}),(0,a.jsx)(o.default,{id:l,primary:e.label,secondary:e.description})]})})}},14077:(e,t,l)=>{Promise.resolve().then(l.bind(l,24930)),Promise.resolve().then(l.bind(l,38305)),Promise.resolve().then(l.bind(l,70116)),Promise.resolve().then(l.bind(l,99239)),Promise.resolve().then(l.bind(l,21882)),Promise.resolve().then(l.bind(l,21460)),Promise.resolve().then(l.bind(l,39363)),Promise.resolve().then(l.bind(l,3713)),Promise.resolve().then(l.bind(l,29767)),Promise.resolve().then(l.bind(l,84578)),Promise.resolve().then(l.bind(l,25957)),Promise.resolve().then(l.bind(l,41983)),Promise.resolve().then(l.t.bind(l,52619,23))},21460:(e,t,l)=>{"use strict";l.d(t,{Logs:()=>ec,cg:()=>eo,uk:()=>er});var a=l(95155),s=l(89489);let i=async(e,t,l)=>{let a={};a.count=1e3,l&&(a.after=l);let s=await e.get("logging/aaa/".concat(t,"/show"),{searchParams:a}).json();return l&&s.shift(),s},n=async e=>await e.get("logging/aaa").json();var r=l(20699),o=l(34880),d=l(37285),c=l(26466),u=l(12115);let m=async(e,t)=>{let l={};l.count=1e3,t&&(l.after=t);let a=await e.get("logging/app/show",{searchParams:l}).json();return t&&a.shift(),a};var h=l(26578),p=l(10245),f=l(82204),x=l(79095),v=l(13398),g=l(23532),j=l(53816),b=l(78470),A=l(25635),N=l(2778),y=l(52363),C=l(65036),w=l(75912),I=l(41983),S=l(70690),k=l(99944),T=l(9957),O=l(90363),M=l(80839),L=l(55406),z=l(50291),R=l(76808),U=l(40171),P=l(2246),H=l(52277),E=l(86946),V=l(12707),G=l(5379),W=l(70303),_=l(88240),F=l(51208),D=l(77202),B=l(90482),q=l(99686);let X=(0,F.tG)("RadiatorGridTimestampInUtc",!1),Z=e=>{let[t]=(0,D.useAtom)(X),l=new Date(e.value);return Number.isNaN(l.getTime())?(0,a.jsx)("span",{children:e.value}):(0,a.jsx)(b.A,{title:l.toISOString(),children:(0,a.jsx)("span",{children:(0,B.Y)(l,{utc:t})})})},J=e=>(0,a.jsxs)("div",{className:"w-full h-full flex items-center justify-center gap-2",children:[(0,a.jsx)(R.A,{color:"warning"}),(0,a.jsx)(A.default,{children:e.msg})]}),K=e=>{let{setDetailsRow:t}=e,{theme:l}=(0,G.D)(),s=e.apiRef.current.getSortedRows(),i=s.findIndex(t=>{var l;return t.row_id===(null==(l=e.row)?void 0:l.row_id)}),n=i-1,r=i+1,o=(0,u.useCallback)(()=>{n>=0&&t(s[n])},[n,t,s]),d=(0,u.useCallback)(()=>{r<s.length&&t(s[r])},[r,t,s]),c=(0,u.useCallback)(e=>{"ArrowUp"===e.key&&o(),"ArrowDown"===e.key&&d()},[o,d]),[m,h]=(0,u.useState)(null),p=(0,_.i)(),f=(0,u.useMemo)(()=>JSON.stringify(e.row,null,4),[e.row]),x=(0,u.useCallback)(()=>{h(f),p.copy(f)},[p,f]);return(0,u.useEffect)(()=>(e.open?document.addEventListener("keydown",c):document.removeEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}),[c,e.open]),(0,a.jsxs)(N.A,{open:e.open,onClose:()=>e.setOpen(!1),fullWidth:!0,maxWidth:"xl",children:[(0,a.jsx)(y.A,{children:"Row details"}),(0,a.jsx)(C.A,{children:(0,a.jsx)(V.iN,{data:e.row||{},restrictAdd:!0,restrictDelete:!0,restrictEdit:!0,restrictDrag:!0,theme:"dark"===l?V.j6:V.nW,rootName:"",maxWidth:"100%"})}),(0,a.jsxs)(w.A,{children:[(0,a.jsx)(b.A,{title:"Previous row",children:(0,a.jsx)(I.default,{disabled:n<0,onClick:o,children:(0,a.jsx)(U.A,{})})}),(0,a.jsx)(b.A,{title:"Next row",children:(0,a.jsx)(I.default,{disabled:r>=s.length,onClick:d,children:(0,a.jsx)(P.A,{})})}),(0,a.jsx)(b.A,{title:m===f?"Copied!":"Copy to clipboard",children:(0,a.jsx)(I.default,{onClick:x,children:(0,a.jsx)(H.A,{})})}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(S.default,{onClick:()=>e.setOpen(!1),children:"Close"})]})]})};function Y(e){let[t,l]=(0,D.useAtom)(X);return(0,a.jsxs)(p.b,{children:[(0,a.jsx)(f.j,{}),(0,a.jsx)(x.Q,{}),(0,a.jsx)(S.default,{size:"small",startIcon:(0,a.jsx)(O.A,{}),onClick:e.onAutosizeClick,children:"Autosize columns"}),void 0!==e.pauseUpdates&&(0,a.jsx)(b.A,{title:e.pauseUpdates?"Click to poll logs for updates":"Click to pause polling for updates",children:(0,a.jsx)(S.default,{size:"small",startIcon:e.pauseUpdates?(0,a.jsx)(L.A,{}):(0,a.jsx)(M.A,{}),onClick:e.onTogglePause,children:e.pauseUpdates?"Tail updates":"Pause updates"})}),(0,a.jsx)(S.default,{size:"small",startIcon:(0,a.jsx)(z.A,{}),onClick:e.onReset,children:"Reset table"}),(0,a.jsx)(v.qn,{printOptions:{hideFooter:!0,disableToolbarButton:!0}}),(0,a.jsx)(b.A,{title:"Show timestamps in UTC instead of the local time zone",children:(0,a.jsx)(k.A,{control:(0,a.jsx)(T.A,{className:"ml-2",size:"small",checked:t,onChange:()=>{l(e=>!e)}}),label:"UTC"})})]})}let Q=e=>{let[t,l]=(0,u.useState)(0),s=(0,g.b)(),i=async()=>{await s.current.autosizeColumns({includeOutliers:!0})},n="".concat(e.id,"-DataGrid-Settings"),[r,o]=(0,u.useState)(void 0),d=(0,u.useRef)(void 0);(0,u.useEffect)(()=>{d.current=e.data[0]?(0,W.Iy)(e.data[0].msg):void 0},[e.data]),(0,u.useEffect)(()=>{let t=window.localStorage.getItem(n),l=void 0!==d.current;if(null===t)o(e.defaultState);else{var a,s,i;let n=null!=(i=(0,W.vf)(t))?i:{},r={...e.defaultState,...n};l&&(null==(s=r.columns)||null==(a=s.columnVisibilityModel)?void 0:a.msg)&&(r.columns.columnVisibilityModel.msg=!1),o(r)}},[n,e.defaultState,d]);let c=(0,u.useCallback)(e=>{var t;let l={sortModel:null==(t=e.sorting)?void 0:t.sortModel},a={columns:e.columns,filter:e.filter,sorting:l};try{let e=JSON.stringify(a);window.localStorage.setItem(n,e)}catch(e){(0,q.z)("Failed to save Grid state to localStorage: ".concat(e))}},[n]),m=()=>{e.togglePauseUpdates&&e.togglePauseUpdates()},h=()=>{window.localStorage.removeItem(n),l(e=>e+1)};(0,u.useEffect)(()=>{r&&s.current.restoreState(r)},[s,r]);let[p,f]=(0,u.useState)(!1),[x,v]=(0,u.useState)(),b=(0,u.useCallback)(e=>{f(!0),v(e)},[]),A=(0,u.useMemo)(()=>[{field:"details",headerName:"Details",headerClassName:"opacity-0",width:48,resizable:!1,type:"actions",renderCell:e=>(0,a.jsx)(I.default,{"aria-label":"details",size:"small",onClick:()=>b(e.row),title:"More details",children:(0,a.jsx)(E.A,{})})},...e.columns],[b,e.columns]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.C,{loading:!e.pauseUpdates&&e.isLoading,rows:e.data,columns:A,hideFooter:e.small,getRowId:e.getRowId,disableRowSelectionOnClick:!0,apiRef:s,initialState:e.defaultState,onStateChange:r?c:void 0,slots:{toolbar:e.small?void 0:()=>(0,a.jsx)(Y,{pauseUpdates:e.pauseUpdates,onTogglePause:m,onAutosizeClick:i,onReset:h}),noRowsOverlay:!1===e.enabled&&e.disabledMsg?()=>(0,a.jsx)(J,{msg:e.disabledMsg}):void 0}},t),(0,a.jsx)(K,{open:p,setOpen:f,setDetailsRow:v,row:x,apiRef:s})]})},$=[{field:"timestamp",headerName:"Timestamp",width:230,renderCell:e=>(0,a.jsx)(Z,{value:e.value})},{field:"target",headerName:"Target"},{field:"id",headerName:"ID"},{field:"level",headerName:"Level"},{field:"msg",headerName:"Message",flex:1,minWidth:200}],ee={density:"compact",sorting:{sortModel:[{field:"timestamp",sort:"desc"}]},columns:{columnVisibilityModel:{}}},et=e=>{let t,[l,i]=(0,h.e)([!0,!1]),n=(t=!l,(0,s.Vw)(["applicationLogs"],(e,t)=>m(e,t),(e,t,l)=>{if(!e)return;let a=e[e.length-1];return a?a[0]:l},{refetch:t})),r=eo(n.data);return(0,a.jsx)(Q,{id:"ApplicationLogs",enabled:!l,data:r,isLoading:n.isLoading,columns:$,pauseUpdates:l,togglePauseUpdates:i,getRowId:er,small:e.small,defaultState:ee})},el=[{field:"Timestamp",headerName:"Timestamp",width:230,renderCell:e=>(0,a.jsx)(Z,{value:e.value})},{field:"User-Name",headerName:"User-Name",minWidth:200},{field:"Calling-Station-Id",headerName:"Calling-Station-Id",minWidth:140},{field:"Called-Station-Id",headerName:"Called-Station-Id",minWidth:200},{field:"Result",headerName:"Result",minWidth:80},{field:"Reason",headerName:"Reason",minWidth:80},{field:"Client-IP-Address",headerName:"Client-IP-Address",minWidth:120},{field:"Client-Identifier",headerName:"Client-Identifier",minWidth:230},{field:"NAS-IP-Address",headerName:"NAS-IP-Address",minWidth:120},{field:"NAS-Identifier",headerName:"NAS-Identifier",minWidth:300},{field:"Policy",headerName:"Policy",minWidth:120},{field:"Handler",headerName:"Handler",minWidth:150},{field:"Context-Id",headerName:"Context-Id",minWidth:150},{field:"Elapsed-Time",headerName:"Elapsed-Time",minWidth:150},{field:"id",headerName:"ID",minWidth:160}],ea=[{field:"Timestamp",headerName:"Timestamp",width:230,renderCell:e=>(0,a.jsx)(Z,{value:e.value})},{field:"msg",headerName:"Message",flex:1,minWidth:200},{field:"id",headerName:"ID",minWidth:160}],es={density:"compact",sorting:{sortModel:[{field:"timestamp",sort:"desc"}]}},ei=e=>{var t;let[l,n]=(0,h.e)([!0,!1]),{data:r,isLoading:o}=((e,t)=>(0,s.Vw)(["aaaLogs",e],(t,l)=>i(t,e,l),(e,t,l)=>{if(!e)return;let a=e[e.length-1];return a?a[0]:l},{refetch:t}))(e.id,!l),d=(0,u.useMemo)(()=>eo(null!=r?r:[]),[r]),c=null==(t=d[0])?void 0:t.msg,m=(0,u.useMemo)(()=>{var e;return c&&null!=(e=(0,W.Iy)(c))?e:{}},[c]),p=(0,u.useMemo)(()=>d.map(e=>{var t;return{...null!=(t=(0,W.Iy)(e.msg))?t:{},...e}}),[d]),f=(0,u.useMemo)(()=>{let t=Object.keys(m);if(0===t.length)return ea;if(!e.fixedColumns)return t.map(e=>({field:e,headerName:e})).sort((e,t)=>e.field.localeCompare(t.field));let l=t.flatMap(e=>el.find(t=>t.field===e)?[]:{field:e,headerName:e}).sort((e,t)=>e.field.localeCompare(t.field));return[...el,...l]},[m,e.fixedColumns]);return(0,a.jsx)(Q,{id:"AaaLogs-".concat(e.id),enabled:e.enabled,data:p,isLoading:o,columns:f,pauseUpdates:l,togglePauseUpdates:n,getRowId:er,small:e.small,defaultState:es,disabledMsg:"In-memory logger not configured for ".concat(e.id)})};var en=l(20063);let er=e=>"".concat(e.row_id),eo=e=>e.map((e,t)=>({...e[1],timestamp:e[0],index:t})),ed=()=>(0,a.jsx)("span",{children:(0,a.jsx)(r.default,{width:"70px"})}),ec=e=>{var t;let{data:l,isLoading:i}=(0,s.V8)(["aaaLogs"],n),r=l?Object.keys(l):[],[m,h]=(e=>{var t;let l=(0,en.useRouter)(),a=(0,en.useSearchParams)();return[(null!=(t=a.get("logtab"))?t:"")||e,(0,u.useCallback)(e=>{let t=new URLSearchParams(a);t.set("logtab",e.toString()),l.push("?"+t.toString(),{scroll:!1})},[l,a])]})("AUTHENTICATION"),p=(null==l?void 0:l[m])?m:"APPLICATION",f=(null==l||null==(t=l[m])?void 0:t.memory)!==null;return(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-96 w-full",children:[(0,a.jsx)(o.default,{sx:{borderBottom:1,borderColor:"divider",width:"100%",mb:2},children:(0,a.jsxs)(d.A,{value:p,onChange:(e,t)=>{h(t)},"aria-label":"Logger type",variant:"scrollable",scrollButtons:"auto",children:[r.includes("AUTHENTICATION")&&(0,a.jsx)(c.A,{label:"AUTHENTICATION",value:"AUTHENTICATION"}),r.includes("AUTHORIZATION")&&(0,a.jsx)(c.A,{label:"AUTHORIZATION",value:"AUTHORIZATION"}),r.includes("ACCOUNTING")&&(0,a.jsx)(c.A,{label:"ACCOUNTING",value:"ACCOUNTING"}),(0,a.jsx)(c.A,{label:"APPLICATION",value:"APPLICATION"}),r.flatMap(e=>"AUTHENTICATION"===e||"AUTHORIZATION"===e||"ACCOUNTING"===e?[]:(0,a.jsx)(c.A,{value:e,label:e},e)),i&&[(0,a.jsx)(c.A,{label:(0,a.jsx)(ed,{})},"skeleton1"),(0,a.jsx)(c.A,{label:(0,a.jsx)(ed,{})},"skeleton2"),(0,a.jsx)(c.A,{label:(0,a.jsx)(ed,{})},"skeleton3")]]})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col min-h-0",children:"APPLICATION"===p?(0,a.jsx)(et,{small:e.small}):(0,a.jsx)(ei,{id:p,fixedColumns:"AUTHENTICATION"===p||"AUTHORIZATION"===p||"ACCOUNTING"===p,enabled:f,small:e.small},p)})]})}},21882:(e,t,l)=>{"use strict";l.d(t,{StatusCard:()=>m});var a=l(95155),s=l(29767),i=l(25957),n=l(84578);l(12115);var r=l(23100),o=l(64393);let d=(0,l(36697).A)((0,a.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage");var c=l(48563),u=l(44775);let m=()=>{let e,t,{data:l,isLoading:m,isError:h}=(0,r.iL)();return l&&(e="v".concat(l.version)+" ("+l.build_kind,l.debug_build&&(e+=" debug",l.git_branch&&(e+=" ".concat(l.git_branch))),e+=")",l.build_timestamp&&(e+="\n".concat(l.build_timestamp)),t="".concat(l.hostname," (").concat(l.cpu_target,")")),(0,a.jsxs)(s.default,{className:"flex flex-col",children:[(0,a.jsx)(i.default,{avatar:h?(0,a.jsx)(c.A,{}):(0,a.jsx)(d,{}),title:h?"Management API error":(0,a.jsx)(o.l,{width:120,isLoading:m,measureChildren:!1,children:(null==l?void 0:l.recovery_mode)?(0,a.jsx)("span",{className:"text-secondary-yellow",children:"Recovery mode"}):"Radiator is active"}),subheader:(0,a.jsxs)(o.l,{width:100,isLoading:m,measureChildren:!1,children:["Uptime: ",function(e){let t=null!=e?e:0,l=Math.floor(t/60),a=Math.floor(l/60),s=Math.floor(a/24),i=(e,t)=>"".concat(e," ").concat(t).concat(1!==e?"s":"");return 0!==s?i(s,"day"):0!==a?i(a,"hour"):0!==l?i(l,"minute"):i(t,"second")}(null==l?void 0:l.uptime)]}),className:"pb-0"}),(0,a.jsx)(n.default,{className:"flex flex-col flex-1"}),(0,a.jsx)(u.d,{isLoading:m,items:[{title:"Radiator Version",value:null!=e?e:"N/A"},{title:"Hostname",value:null!=t?t:"N/A"}]})]})}},23100:(e,t,l)=>{"use strict";l.d(t,{H6:()=>o,iL:()=>r});var a=l(89489),s=l(80549);let i=async e=>await e.get("application").json(),n=async(e,t)=>await e.post("application/control",{json:t}).text(),r=()=>(0,a.V8)(["applicationInfo"],i),o=()=>{let e=(0,a.JN)();return(0,s.n)({mutationFn:t=>n(e,t)})}},24930:(e,t,l)=>{"use strict";l.d(t,{AAACard:()=>h});var a=l(95155);l(12115);let s=(0,l(36697).A)((0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment");var i=l(91382),n=l(64393),r=l(3651),o=l(44775),d=l(87403),c=l(29767),u=l(25957),m=l(84578);let h=()=>{var e;let t=(0,r.DP)(),l=t.data?(0,r.yI)(t.data,"Handler"):{Accept:0,Error:0,NoReply:0,Reject:0,Sessions:0},h=0!==l.Sessions?l.Accept/l.Sessions:0,p=[{id:"Accept",label:"Accepted",value:l.Accept,color:d.yG},{id:"NoReply",label:"Ignored",value:l.NoReply,color:i.A[700]},{id:"Reject",label:"Rejected",value:l.Reject,color:d.bH}];return(0,a.jsxs)(c.default,{className:"flex flex-col",children:[(0,a.jsx)(u.default,{avatar:(0,a.jsx)(s,{}),title:"AAA requests",subheader:(0,a.jsxs)(n.l,{width:100,isLoading:t.isLoading,measureChildren:!1,children:["Accept percentage: ",(100*h).toFixed(2),"%"]}),className:"pb-0"}),(0,a.jsxs)(m.default,{children:[(0,a.jsx)("div",{className:"mb-2 flex gap-px h-2 overflow-hidden rounded-sm bg-gray-100 dark:bg-neutral-700 text-xs",children:p.map(e=>(0,a.jsx)("div",{className:"transition-all duration-500 ease-out",title:"".concat(e.label,": ").concat(e.value),style:{backgroundColor:e.color,width:"".concat(0!==l.Sessions?100*e.value/l.Sessions:0,"%")}},e.id))}),(0,a.jsx)("div",{className:"flex items-center gap-4 text-xs",children:p.map(e=>(0,a.jsxs)("div",{className:"flex gap-2 items-center",title:"".concat(e.label,": ").concat(e.value),children:[(0,a.jsx)("div",{className:"rounded-full size-3",style:{backgroundColor:e.color}}),(0,a.jsx)("div",{children:e.label})]},e.id))})]}),(0,a.jsx)(o.d,{isLoading:t.isLoading,items:[{title:"Errors",value:null!=(e=l.Error)?e:"N/A"}]})]})}},38305:(e,t,l)=>{"use strict";l.d(t,{CountersCard:()=>h});var a=l(95155);l(12115);var s=l(98981),i=l(61990),n=l(3713),r=l(52619),o=l.n(r),d=l(29767),c=l(25957),u=l(41983),m=l(84578);let h=()=>(0,a.jsxs)(d.default,{className:"overflow-auto xl:flex-1 flex flex-col w-full h-full",children:[(0,a.jsx)(c.default,{title:"Counters",subheader:"Values of common counters",avatar:(0,a.jsx)(s.A,{}),action:(0,a.jsx)(u.default,{size:"small",color:"inherit",href:"/counters",component:o(),children:(0,a.jsx)(n.default,{fontSize:"inherit"})})}),(0,a.jsxs)(m.default,{className:"flex-1 flex flex-col gap-6 max-h-full overflow-auto",children:[(0,a.jsx)(i.A,{type:"Server",compact:!0}),(0,a.jsx)(i.A,{type:"Custom",compact:!0})]})]})},39363:(e,t,l)=>{"use strict";l.d(t,{default:()=>i});var a=l(36697),s=l(95155);let i=(0,a.A)((0,s.jsx)("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}),"List")},42634:()=>{},44775:(e,t,l)=>{"use strict";l.d(t,{d:()=>o});var a=l(95155),s=l(64393),i=l(21067),n=l(84578),r=l(25635);let o=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(i.default,{}),(0,a.jsx)(n.default,{className:"py-0 flex gap-4 overflow-x-auto",children:e.items.map((t,l)=>(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(s.l,{isLoading:e.isLoading,style:{minWidth:t.skeletonMinWidth},children:(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("div",{className:"font-semibold text-xs pb-1 text-nowrap",children:t.title}),(0,a.jsx)(r.default,{className:"text-xs whitespace-pre-line",color:"text.secondary",children:t.value})]})}),l<e.items.length-1&&(0,a.jsx)(i.default,{orientation:"vertical",variant:"middle",flexItem:!0})]},t.title))})]})},48563:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var a=l(36697),s=l(95155);let i=(0,a.A)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error")},57084:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var a=l(36697),s=l(95155);let i=(0,a.A)((0,s.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser")},61990:(e,t,l)=>{"use strict";l.d(t,{A:()=>v});var a=l(95155),s=l(3651),i=l(84938),n=l(9620),r=l(20699),o=l(51074),d=l(27016),c=l.n(d),u=l(7768),m=l(61326),h=l(52619),p=l.n(h),f=l(37359);let x=(0,m.tv)({base:"shrink-0 overflow-hidden text-ellipsis",variants:{data:{compact:"p-2 w-[125px] gap-2 items-center text-sm",normal:"p-3 w-[160px] gap-2 items-center"},heading:{compact:"p-3 w-[160px] text-sm",normal:"p-3 w-[300px]"}}}),v=e=>{let t=(0,s.gZ)(e.type),{timeseries:l,isLoading:d}=(0,i.W)(t.counterGroups,!1),m=Object.entries(c()(t.counterGroups,e=>{let[t,l]=e;return(0,s.K7)(l.group)})).map(i=>{var c;let[m,h]=i;return(0,a.jsxs)("div",{className:"pb-12 last:pb-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 px-3",children:(0,s.jU)(m)}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:x({heading:e.compact?"compact":"normal"}),children:"Counter name"}),null==(c=h[0])?void 0:c[1].values.filter(e=>{let[t]=e;return"Sessions"!==t}).map(t=>{let[l]=t;return(0,a.jsx)("div",{className:x({data:e.compact?"compact":"normal"}),title:l,children:"Custom"===m?"Value":l},l)})]}),(0,a.jsx)("div",{children:t.isLoading?null:h.map(t=>{let[s,i]=t,c=(0,n.Oo)(s),m=(0,n.wt)(s);return(0,a.jsxs)(p(),{href:"/counters/details?id=".concat(encodeURIComponent(c)),style:{color:"inherit"},className:"flex flex-1 no-underline transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-700 border-0 border-solid border-b first:border-t border-neutral-300 dark:border-neutral-700 items-center text-nowrap",children:[(0,a.jsx)("div",{className:x({heading:e.compact?"compact":"normal"}),title:c,children:m}),i.values.filter(e=>{let[t]=e;return"Sessions"!==t}).map((t,s)=>{var i,n,m,h;let[p,v]=t,g=null!=(n=l[c])?n:{},j=null!=(m=null==(i=g[p])?void 0:i.reduce((e,t)=>e+t.value,0))?m:0,b=e=>{if("TimeSpent"===p)return(0,f.fp)(e);let t=e,l=["","K","M","G","T","P"],a=0;for(;t>=1e3&&a<l.length-1;)t/=1e3,a++;let s=Math.max(0,3-(Math.floor(Math.log10(Math.abs(t)||1))+1)),i=t.toFixed(s).replace(/\.?0+$/,"");return"".concat(i," ").concat(l[a]).trim()},A=(0,u.qo)(p,s),N=function(e){var t,l,a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(e)||0===e.length)return[];let i=null!=(t=s.now)?t:Date.now(),n=null!=(l=s.maxPoints)?l:200,r=null!=(a=s.windowMs)?a:864e5;if(n<=0)return[];let o=i-r,d=e.filter(e=>e.timestamp instanceof Date&&e.timestamp.getTime()>=o);if(d.length<=n)return d;let c=Math.ceil(d.length/n),u=[];for(let e=0;e<d.length;e+=c){let t=d.slice(e,e+c),l=0;for(let e of t)l+=e.value;let a=l/t.length;if(0===t.length)continue;let s=Math.floor(t.length/2),i=t[s];u.push({timestamp:i.timestamp,value:a})}return u}(null!=(h=g[p])?h:[]);return(0,a.jsxs)("div",{title:p,className:x({className:"flex",data:e.compact?"compact":"normal"}),children:[(0,a.jsxs)("div",{className:"w-[64px] h-[32px] -ml-1 items-center flex",children:[!d&&(0,a.jsx)(o.E,{data:N.map(e=>e.value),height:32,colors:[A]}),d&&(0,a.jsx)(r.default,{className:"w-[64px] h-[32px]"})]}),(0,a.jsx)("div",{title:b(j),children:"TimeSpent"===p?b(j):null!=j?j:0})]},p)})]},c)})})]},m)});return(0,a.jsx)("div",{className:"w-full grid",children:m})}},64393:(e,t,l)=>{"use strict";l.d(t,{l:()=>i});var a=l(95155),s=l(20699);let i=e=>{let{children:t,isLoading:l,measureChildren:i,...n}=e;return l?(0,a.jsx)(s.default,{...n,children:(null==i||i)&&t}):(0,a.jsx)(a.Fragment,{children:t})}},65547:(e,t,l)=>{"use strict";l.d(t,{H:()=>a});let a=(e,t)=>{let l=Math.floor((e.getTime()-new Date().getTime())/864e5),a=e.toISOString().slice(0,10);return t?"".concat(a," (").concat(l," ").concat(1===l?"day":"days"," ").concat(l>=0?"left":"ago",")"):a}},68251:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var a=l(36697),s=l(95155);let i=(0,a.A)((0,s.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5zm3.5 12.09-1.41 1.41L12 13.42 9.91 15.5 8.5 14.09 10.59 12 8.5 9.91 9.91 8.5 12 10.59l2.09-2.09 1.41 1.41L13.42 12z"}),"GppBad")},70116:(e,t,l)=>{"use strict";l.d(t,{LicenseCard:()=>j});var a=l(95155),s=l(29767),i=l(25957),n=l(41983),r=l(84578),o=l(25635);l(12115);var d=l(57084),c=l(64393),u=l(44775),m=l(95741),h=l(68251);let p=(0,l(36697).A)((0,a.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"}),"Shield");var f=l(3713),x=l(52619),v=l.n(x),g=l(65547);let j=()=>{var e,t;let{data:l,isLoading:x}=(0,m.fX)(),j=!!l&&(0,m.mS)(l),b=(null==l?void 0:l.license)?(0,m.Sk)(null==l?void 0:l.license):void 0,A=l?(0,m.Xk)(l):"Unknown",N=(null!=(e=null==l?void 0:l.attributes)?e:[]).flatMap(e=>"Unknown"===e?[]:"Threads"in e?[{title:"Threads",value:e.Threads.total}]:"Hostname"in e?[{title:"Hostname",value:e.Hostname.name}]:"System"in e?[{title:"System",value:e.System.identifier}]:"Os"in e?[{title:"OS",value:e.Os.value}]:"Users"in e?[{title:"Users (total)",value:Number(e.Users.total)},{title:"Users (per day)",value:Number(e.Users.per_day)}]:[]);return(0,a.jsxs)(s.default,{className:"flex flex-col",children:[(0,a.jsx)(i.default,{avatar:x?(0,a.jsx)(p,{}):"Valid"===j?(0,a.jsx)(d.A,{}):(0,a.jsx)(h.A,{}),title:"License status",subheader:(0,a.jsx)(c.l,{width:100,isLoading:x,measureChildren:!1,children:void 0===l?"No license":"NotYetValid"===j?"Not yet valid":j}),className:"pb-0",action:(0,a.jsx)(n.default,{size:"small",color:"inherit",href:"/licenses",component:v(),children:(0,a.jsx)(f.default,{fontSize:"inherit"})})}),(0,a.jsx)(r.default,{className:"pt-3.5",children:!x&&void 0!==l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.l,{isLoading:x,className:"min-w-[120px]",children:(0,a.jsxs)("div",{className:"text-xs pb-1 font-semibold",children:["Licensee: ",null!=(t=null==l?void 0:l.licensee)?t:"None"]})}),(0,a.jsx)(c.l,{isLoading:x,children:(0,a.jsx)(o.default,{className:"text-xs",color:"text.secondary",children:b?"Expiration: ".concat((0,g.H)(new Date(b),!0)):"License type: ".concat(A)})})]})}),(0,a.jsx)(u.d,{isLoading:x,items:x?[{title:"Loading1",value:"Loading"},{title:"Loading2",value:"Loading"}]:N})]})}},73707:(e,t,l)=>{"use strict";l.d(t,{default:()=>g});var a=l(12115),s=l(2821),i=l(57001),n=l(8532),r=l(48116),o=l(66964),d=l(16625),c=l(30424),u=l(95070),m=l(36766),h=l(69582),p=l(14028),f=l(58081),x=l(95155);let v=(0,r.default)(u.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:l}=e;return[t.root,l.dense&&t.dense,"flex-start"===l.alignItems&&t.alignItemsFlexStart,l.divider&&t.divider,!l.disableGutters&&t.gutters]}})((0,o.A)(e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(f.A.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,n.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(f.A.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,n.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(f.A.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,n.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,n.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(f.A.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(f.A.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{paddingTop:4,paddingBottom:4}}]}})),g=a.forwardRef(function(e,t){let l=(0,d.b)({props:e,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:r=!1,component:o="div",children:c,dense:u=!1,disableGutters:g=!1,divider:j=!1,focusVisibleClassName:b,selected:A=!1,className:N,...y}=l,C=a.useContext(p.A),w=a.useMemo(()=>({dense:u||C.dense||!1,alignItems:n,disableGutters:g}),[n,C.dense,u,g]),I=a.useRef(null);(0,m.A)(()=>{r&&I.current&&I.current.focus()},[r]);let S={...l,alignItems:n,dense:w.dense,disableGutters:g,divider:j,selected:A},k=(e=>{let{alignItems:t,classes:l,dense:a,disabled:s,disableGutters:n,divider:r,selected:o}=e,d=(0,i.A)({root:["root",a&&"dense",!n&&"gutters",r&&"divider",s&&"disabled","flex-start"===t&&"alignItemsFlexStart",o&&"selected"]},f.Y,l);return{...l,...d}})(S),T=(0,h.A)(I,t);return(0,x.jsx)(p.A.Provider,{value:w,children:(0,x.jsx)(v,{ref:T,href:y.href||y.to,component:(y.href||y.to)&&"div"===o?"button":o,focusVisibleClassName:(0,s.A)(k.focusVisible,b),ownerState:S,className:(0,s.A)(k.root,N),...y,classes:k,children:c})})})},87403:(e,t,l)=>{"use strict";l.d(t,{_k:()=>c,a5:()=>d,bH:()=>o,yG:()=>r});var a=l(7032),s=l.n(a),i=l(70622);let n={typography:{fontFamily:s().style.fontFamily},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.025), rgba(255, 255, 255, 0.015));"}}}}},r="#24b073",o="#eeb942",d=(0,i.A)({palette:{mode:"dark",primary:{main:r},secondary:{main:o},background:{default:"#131313",paper:"#181818"}},canvasChart:{gridColor:"rgba(255, 255, 255, 0.1)"},...n}),c=(0,i.A)({palette:{mode:"light",primary:{main:r},secondary:{main:o},background:{default:"#f4f2f2",paper:"#f4f2f2"}},canvasChart:{gridColor:"rgba(0, 0, 0, 0.1)"},...n})},95741:(e,t,l)=>{"use strict";l.d(t,{Qv:()=>h,Sk:()=>d,Xk:()=>u,YV:()=>r,fX:()=>o,kK:()=>f,mS:()=>c});var a=l(89489),s=l(99776),i=l(80549);let n=async e=>Object.entries(await e.get("license").json()),r=()=>{let{data:e,isLoading:t}=(0,a.V8)(["license"],n,{refetchInterval:6e4});return{licenses:null==e?void 0:e.map(e=>{let[t,l]=e;return{name:t,data:l}}),isLoading:t}},o=()=>{let{licenses:e,isLoading:t}=r();return{...null==e?void 0:e.at(0),isLoading:t}},d=e=>{if("string"!=typeof e){if("Evaluation"in e)return e.Evaluation.valid_until;if("Subscription"in e)return e.Subscription.valid_until}},c=e=>{if(e.is_expired)return"Expired";let t=e.license;return"Development"===t||"Perpetual"===t?"Valid":new Date<new Date(e.valid_after)?"NotYetValid":"Valid"},u=e=>{let t=e.license;return"string"==typeof t?t:"Evaluation"in t?"Evaluation":"Subscription"in t?"Subscription":"Unknown"},m=async(e,t)=>{let l=new FormData;l.append("file",t.file,t.file.name),await e.post("license-files",{body:l}).json()},h=e=>{let t=(0,a.JN)(),l=(0,s.jE)();return(0,i.n)({mutationFn:e=>m(t,e),onSuccess:async()=>{var t;await l.invalidateQueries({queryKey:["license"]}),null==(t=e.onSuccess)||t.call(e)}})},p=async(e,t)=>{await e.delete("license-files/".concat(t.filename))},f=()=>{let e=(0,a.JN)(),t=(0,s.jE)();return(0,i.n)({mutationFn:async t=>{await p(e,{filename:t.filename})},async onSuccess(){await t.invalidateQueries({queryKey:["license"]})}})}},98981:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var a=l(36697),s=l(95155);let i=(0,a.A)((0,s.jsx)("path",{d:"M10 8H8v4H4v2h4v4h2v-4h4v-2h-4zm4.5-1.92V7.9l2.5-.5V18h2V5z"}),"PlusOne")},99239:(e,t,l)=>{"use strict";l.d(t,{StatisticsCard:()=>O});var a=l(95155),s=l(12115),i=l(2778),n=l(52363),r=l(21067),o=l(41602),d=l(75912),c=l(70690),u=l(29767),m=l(25957),h=l(78470),p=l(41983),f=l(84578),x=l(52619),v=l.n(x),g=l(3713),j=l(36697);let b=(0,j.A)((0,a.jsx)("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline");var A=l(3651),N=l(84938),y=l(26578);let C=(0,j.A)((0,a.jsx)("path",{d:"M22 7h-9v2h9zm0 8h-9v2h9zM5.54 11 2 7.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41zm0 8L2 15.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41z"}),"Checklist");var w=l(13777),I=l(26695),S=l(18409),k=l(9620);let T=e=>{let[t,l]=(0,I.E5)();return(0,a.jsxs)(i.A,{onClose:e.onClose,open:e.open,children:[(0,a.jsx)(n.A,{children:"Visible Handlers"}),(0,a.jsx)(r.default,{}),(0,a.jsxs)(o.default,{dense:!0,children:[(0,a.jsx)(w.F,{id:"statistics-toggle-all",label:"Show/Hide All",checked:0===t.length,onToggle:()=>{0===t.length?l(e.counterGroupIds):l([])},indeterminate:0!==t.length&&t.length!==e.counterGroupIds.length}),e.counterGroupIds.map(e=>{let s="checkbox-list-label-".concat(e);return(0,a.jsx)(w.F,{id:s,label:e,checked:!t.includes(e),onToggle:()=>(e=>{let a=t.indexOf(e);if(a>=0){let e=[...t];e.splice(a,1),l(e)}else l([...t,e])})(e)},e)})]}),(0,a.jsx)(r.default,{}),(0,a.jsx)(d.A,{children:(0,a.jsx)(c.default,{onClick:e.onClose,children:"Close"})})]})},O=e=>{let{counterGroups:t}=(0,A.gZ)("Handler"),{timeseries:l}=(0,N.W)(t,!0),[i,n]=(0,y.e)(),[r]=(0,I.E5)(),o=(0,s.useMemo)(()=>t.map(e=>{let[t,l]=e;return(0,k.Oo)(t)}),[t]),d=(0,s.useMemo)(()=>Object.entries(l).filter(e=>{let[t]=e;return!r.includes(t)}).flatMap(e=>{let[t,l]=e;return Object.entries(l).filter(e=>{let[t]=e;return!t.endsWith("Sessions")})}),[r,l]);return(0,a.jsxs)(u.default,{className:"flex flex-col w-full h-96 lg:h-[36rem]",children:[(0,a.jsx)(m.default,{title:"Handler statistics",subheader:"Overview of handler counters over time",avatar:(0,a.jsx)(b,{}),className:"pb-0 z-10",action:(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,a.jsx)(h.A,{title:"Statistics preferences",children:(0,a.jsx)(c.default,{variant:"outlined",size:"small",onClick:()=>n(),startIcon:(0,a.jsx)(C,{}),children:"Handlers"})}),(0,a.jsx)(T,{open:i,onClose:n,counterGroupIds:o}),e.showFullLink?(0,a.jsx)(p.default,{className:"h-full aspect-square ",size:"small",color:"inherit",href:"/handler-statistics",component:v(),children:(0,a.jsx)(g.default,{fontSize:"inherit"})}):null]})}),(0,a.jsx)(f.default,{className:"flex-1 min-h-0 -m-4 ml-0 -mt-10 relative",children:l&&(0,a.jsx)(S.$,{id:"statistics-card",timeseries:d})})]})}}},e=>{e.O(0,[2864,5647,9140,4854,5070,8548,870,2378,4614,7097,2619,3820,3202,5367,4180,449,1023,4488,5154,8157,4578,1081,7907,3309,3054,4173,8368,5385,1012,8441,1255,7358],()=>e(e.s=14077)),_N_E=e.O()}]);