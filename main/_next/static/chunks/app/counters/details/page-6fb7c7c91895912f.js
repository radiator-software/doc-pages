(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1027],{7768:(e,t,a)=>{"use strict";a.d(t,{qo:()=>x,rE:()=>u});var s=a(95155),r=a(87403),l=a(24049),n=a(53525),i=a(34471),o=a(98487),d=a(10507),c=a(9232);function u(e){let{id:t,color:a}=e;return(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"__chart-color-palette-".concat(t),gradientTransform:"rotate(90)",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:a,stopOpacity:.25}),(0,s.jsx)("stop",{offset:"95%",stopColor:a,stopOpacity:0})]})})}let m=[l.A[400],r.bH,n.A[400],i.A[400],o.A[400],r.yG,d.A[400],c.A[400]],x=(e,t)=>{let a=e.split("-");switch(a[a.length-1]){case"Accept":case"Replies":return r.yG;case"Sessions":case"Requests":return d.A[400];case"Timeouts":case"NoReply":return r.bH;case"Reject":return o.A[400];case"NoHandler":case"NoAvailableConnections":return i.A[400];case"Errors":case"Error":return c.A[400];default:var s;return null!=(s=m[t%m.length])?s:r.bH}}},34860:(e,t,a)=>{"use strict";function s(e,t){if(null==e)throw Error(null!=t?t:"Value must not be null or undefined")}a.d(t,{B:()=>s})},35670:(e,t,a)=>{"use strict";a.d(t,{CounterDetails:()=>L});var s=a(95155),r=a(3651),l=a(84938),n=a(29767),i=a(25957),o=a(41602),d=a(23820),c=a(17681),u=a(20699),m=a(84578),x=a(16963),f=a(2456),h=a(64792),p=a(71356),j=a(45202),g=a(20063),v=a(12115),b=a(89489);let y=async(e,t)=>{if(void 0===t)return[0,0,0,0,0,0,0,0];let a=t.join("/");return await e.post("statistics/histogram/refresh/".concat(a)),await e.get("statistics/histogram/".concat(a)).json()},w=async e=>await e.get("statistics/histogram").json();var A=a(99673),N=a(65379),C=a(61065),k=a(49349),S=a(39824),E=a(81431),F=a(4754),O=a(2511),_=a(2380),P=a(66148),R=a(7768),I=a(29092);let T=e=>{let t=e/1e3;return t<11?"".concat(t.toFixed(2),"ms"):t<.1?"".concat(e.toFixed(2),"\xb5s"):(0,I.A)(t)},H=e=>{var t;let a=null!=(t=e.timeseries)?t:e.dataset;return a[0]&&0!==a[0][1].data.length?(0,s.jsxs)(A.E,{series:a.map((e,t)=>{let[a,s]=e;return{id:encodeURIComponent(a),data:s.data.map(e=>{var t;return null!=(t=e.value)?t:e.y}),area:!0,color:(0,R.qo)(a,t),label:a,showMark:!1,type:"bar",valueFormatter:e=>T(null!=e?e:0)}}),yAxis:[{valueFormatter:e=>T(null!=e?e:0)}],xAxis:[{scaleType:e.timeseries?"time":"band",data:a[0][1].data.map(t=>e.timeseries?t.timestamp:t.x),valueFormatter:e.timeseries?e=>new Intl.DateTimeFormat("en-GB",{timeStyle:"short"}).format(e):void 0}],sx:{...Object.fromEntries(a.map(e=>{let[t]=e;return["& .MuiAreaElement-series-".concat(encodeURIComponent(t)),{fill:"url(#__chart-color-palette-".concat(encodeURIComponent(t),")")}]}))},children:[(0,s.jsx)(N.b,{}),a.map((e,t)=>{let[a]=e;return(0,s.jsx)(R.rE,{id:encodeURIComponent(a),color:(0,R.qo)(a,t)},a)}),(0,s.jsx)(C.S,{vertical:!0,horizontal:!0}),(0,s.jsx)(k.z,{}),(0,s.jsx)(S.W,{}),(0,s.jsx)(E.l,{}),(0,s.jsx)(F.b,{}),(0,s.jsx)(O.U,{}),!1!==e.area&&(0,s.jsx)(_.b,{}),(0,s.jsx)(P.R9,{x:"band",y:"line"})]}):(0,s.jsx)("div",{className:"flex h-full justify-center items-center",children:"No data"})};var M=a(34860),U=a(18409),q=a(9620),G=a(37359);let L=e=>{let t=(0,g.useSearchParams)().get("id"),a=(0,v.useMemo)(()=>t?(0,q.WI)(decodeURIComponent(t)):null,[t]),{counter:y,namespace:A,isLoading:N}=(0,r.S2)(a),{data:C=[]}=(0,b.V8)(["histogram"],e=>w(e)),k=(0,v.useMemo)(()=>A?C.filter(e=>e.length>A.length&&A.every((t,a)=>e[a]===t)):[],[A,C]),{timeseries:S,isLoading:E}=(0,l.W)((0,v.useMemo)(()=>void 0!==y&&void 0!==A?[[A,y]]:[],[y,A]),!1),F=A?S[(0,q.Oo)(A)]:void 0,O=F?Object.entries(F).filter(e=>{let[t]=e;return!t.endsWith("Sessions")}):void 0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.default,{children:[(0,s.jsx)(i.default,{title:"Counter group details"}),(0,s.jsxs)(o.default,{children:[(0,s.jsx)(d.default,{children:(0,s.jsx)(c.default,{primary:"Counter group ID",secondary:A?(0,q.Oo)(A):(0,s.jsx)(u.default,{})})}),(0,s.jsx)(d.default,{children:(0,s.jsx)(c.default,{primary:"Type",secondary:(null==y?void 0:y.group)?(0,r.K7)(null==y?void 0:y.group):(0,s.jsx)(u.default,{className:"max-w-32"})})})]})]}),(0,s.jsxs)(n.default,{className:"flex flex-col w-full bg-default-50 shadow-lg rounded-lg h-96 lg:h-[36rem]",children:[(0,s.jsx)(i.default,{title:"Statistics"}),N?null:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.default,{className:"w-full",children:(0,s.jsxs)(x.A,{className:"overflow-x-auto w-full",children:[(0,s.jsx)(f.A,{children:(0,s.jsx)(h.A,{children:null==y?void 0:y.values.filter(e=>{let[t]=e;return"Sessions"!==t}).map(e=>{let[t]=e;return(0,s.jsx)(p.A,{children:t},t)})})}),(0,s.jsx)(j.A,{children:(0,s.jsx)(h.A,{children:null==y?void 0:y.values.filter(e=>{let[t]=e;return"Sessions"!==t}).map(e=>{let[t,a]=e;return(0,s.jsx)(p.A,{title:"TimeSpent"===t?Number(a).toLocaleString():void 0,children:"TimeSpent"===t?(0,G.fp)(Number(a)):a},t)})})})]})})}),E?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.default,{children:[(0,s.jsx)(u.default,{className:"max-w-64"}),(0,s.jsx)(u.default,{className:"max-w-64"}),(0,s.jsx)(u.default,{className:"max-w-64"})]})}):(0,s.jsx)(m.default,{className:"flex-1 min-h-0 -m-4 -ml-2 -mt-12",children:O&&(0,s.jsx)(U.$,{id:"counter-details-".concat(A?(0,q.Oo)(A):"unknown"),inlineLegend:!0,timeseries:O})})]}),k.map(e=>(0,s.jsx)(B,{histogramNamespace:e},(0,q.Oo)(e)))]})},W=["p25","p50","p75","p80","p90","p95","p99","p100"];function B(e){var t;let{histogramNamespace:a}=e,{data:r,isLoading:l}=(0,b.V8)(["histogram",...a||["unknown"]],e=>y(e,a)),o=null!=(t=a[a.length-1])?t:"Histogram";return(0,s.jsxs)(n.default,{className:"flex flex-col w-full bg-default-50 shadow-lg rounded-lg h-96 lg:h-[36rem]",children:[(0,s.jsx)(i.default,{title:o}),l?(0,s.jsxs)(m.default,{children:[(0,s.jsx)(u.default,{className:"max-w-64"}),(0,s.jsx)(u.default,{className:"max-w-64"}),(0,s.jsx)(u.default,{className:"max-w-64"})]}):(0,s.jsx)(m.default,{className:"flex-1 min-h-0 -m-4 -ml-2 -mt-12",children:r&&(0,s.jsx)(H,{dataset:[[o,{data:r.map((e,t)=>{let a=W[t];return(0,M.B)(a,"No histogram quantile label for index ".concat(t)),{x:a,y:e}})}]]})})]})}},39275:(e,t,a)=>{Promise.resolve().then(a.bind(a,35670)),Promise.resolve().then(a.bind(a,19219)),Promise.resolve().then(a.bind(a,70690)),Promise.resolve().then(a.bind(a,29767)),Promise.resolve().then(a.bind(a,84578)),Promise.resolve().then(a.bind(a,25957)),Promise.resolve().then(a.bind(a,20699)),Promise.resolve().then(a.t.bind(a,52619,23))},87403:(e,t,a)=>{"use strict";a.d(t,{_k:()=>c,a5:()=>d,bH:()=>o,yG:()=>i});var s=a(7032),r=a.n(s),l=a(70622);let n={typography:{fontFamily:r().style.fontFamily},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.025), rgba(255, 255, 255, 0.015));"}}}}},i="#24b073",o="#eeb942",d=(0,l.A)({palette:{mode:"dark",primary:{main:i},secondary:{main:o},background:{default:"#131313",paper:"#181818"}},canvasChart:{gridColor:"rgba(255, 255, 255, 0.1)"},...n}),c=(0,l.A)({palette:{mode:"light",primary:{main:i},secondary:{main:o},background:{default:"#f4f2f2",paper:"#f4f2f2"}},canvasChart:{gridColor:"rgba(0, 0, 0, 0.1)"},...n})}},e=>{e.O(0,[2864,5647,9140,4854,5070,8548,870,2378,4614,7097,2619,3820,3202,5367,8157,7907,3054,4173,422,1012,8441,1255,7358],()=>e(e.s=39275)),_N_E=e.O()}]);