(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1524],{9617:(e,t,l)=>{"use strict";l.d(t,{o2:()=>i,tR:()=>n});var a=l(20556),s=l(95704);let i=a.Yj().min(1,"NEXT_PUBLIC_RADIATOR_BASE_PATH must not be empty").parse("/doc-pages/v10.29.0"),n=a.KC([a.eu("management"),a.eu("docs")]).optional().default("management").parse("docs");a.uE().optional().default(!1).parse(s.env.NEXT_PUBLIC_RADIATOR_PUBLIC)},21460:(e,t,l)=>{"use strict";l.d(t,{Logs:()=>eu,cg:()=>eo,uk:()=>er});var a=l(95155),s=l(89489);let i=async(e,t,l)=>{let a={};a.count=1e3,l&&(a.after=l);let s=await e.get("logging/aaa/".concat(t,"/show"),{searchParams:a}).json();return l&&s.shift(),s},n=async e=>await e.get("logging/aaa").json();var r=l(20699),o=l(34880),d=l(37285),u=l(26466),c=l(12115);let m=async(e,t)=>{let l={};l.count=1e3,t&&(l.after=t);let a=await e.get("logging/app/show",{searchParams:l}).json();return t&&a.shift(),a};var h=l(26578),f=l(10245),g=l(82204),p=l(79095),v=l(13398),x=l(23532),A=l(53816),N=l(78470),I=l(25635),j=l(2778),C=l(52363),b=l(65036),w=l(75912),T=l(41983),y=l(70690),S=l(99944),O=l(9957),k=l(90363),U=l(80839),P=l(55406),R=l(50291),E=l(76808),L=l(40171),M=l(2246),D=l(52277),W=l(86946),H=l(12707),_=l(5379),z=l(70303),G=l(88240),V=l(51208),F=l(77202),B=l(90482),Y=l(99686);let Z=(0,V.tG)("RadiatorGridTimestampInUtc",!1),q=e=>{let[t]=(0,F.useAtom)(Z),l=new Date(e.value);return Number.isNaN(l.getTime())?(0,a.jsx)("span",{children:e.value}):(0,a.jsx)(N.A,{title:l.toISOString(),children:(0,a.jsx)("span",{children:(0,B.Y)(l,{utc:t})})})},J=e=>(0,a.jsxs)("div",{className:"w-full h-full flex items-center justify-center gap-2",children:[(0,a.jsx)(E.A,{color:"warning"}),(0,a.jsx)(I.default,{children:e.msg})]}),X=e=>{let{setDetailsRow:t}=e,{theme:l}=(0,_.D)(),s=e.apiRef.current.getSortedRows(),i=s.findIndex(t=>{var l;return t.row_id===(null==(l=e.row)?void 0:l.row_id)}),n=i-1,r=i+1,o=(0,c.useCallback)(()=>{n>=0&&t(s[n])},[n,t,s]),d=(0,c.useCallback)(()=>{r<s.length&&t(s[r])},[r,t,s]),u=(0,c.useCallback)(e=>{"ArrowUp"===e.key&&o(),"ArrowDown"===e.key&&d()},[o,d]),[m,h]=(0,c.useState)(null),f=(0,G.i)(),g=(0,c.useMemo)(()=>JSON.stringify(e.row,null,4),[e.row]),p=(0,c.useCallback)(()=>{h(g),f.copy(g)},[f,g]);return(0,c.useEffect)(()=>(e.open?document.addEventListener("keydown",u):document.removeEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}),[u,e.open]),(0,a.jsxs)(j.A,{open:e.open,onClose:()=>e.setOpen(!1),fullWidth:!0,maxWidth:"xl",children:[(0,a.jsx)(C.A,{children:"Row details"}),(0,a.jsx)(b.A,{children:(0,a.jsx)(H.iN,{data:e.row||{},restrictAdd:!0,restrictDelete:!0,restrictEdit:!0,restrictDrag:!0,theme:"dark"===l?H.j6:H.nW,rootName:"",maxWidth:"100%"})}),(0,a.jsxs)(w.A,{children:[(0,a.jsx)(N.A,{title:"Previous row",children:(0,a.jsx)(T.default,{disabled:n<0,onClick:o,children:(0,a.jsx)(L.A,{})})}),(0,a.jsx)(N.A,{title:"Next row",children:(0,a.jsx)(T.default,{disabled:r>=s.length,onClick:d,children:(0,a.jsx)(M.A,{})})}),(0,a.jsx)(N.A,{title:m===g?"Copied!":"Copy to clipboard",children:(0,a.jsx)(T.default,{onClick:p,children:(0,a.jsx)(D.A,{})})}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(y.default,{onClick:()=>e.setOpen(!1),children:"Close"})]})]})};function K(e){let[t,l]=(0,F.useAtom)(Z);return(0,a.jsxs)(f.b,{children:[(0,a.jsx)(g.j,{}),(0,a.jsx)(p.Q,{}),(0,a.jsx)(y.default,{size:"small",startIcon:(0,a.jsx)(k.A,{}),onClick:e.onAutosizeClick,children:"Autosize columns"}),void 0!==e.pauseUpdates&&(0,a.jsx)(N.A,{title:e.pauseUpdates?"Click to poll logs for updates":"Click to pause polling for updates",children:(0,a.jsx)(y.default,{size:"small",startIcon:e.pauseUpdates?(0,a.jsx)(P.A,{}):(0,a.jsx)(U.A,{}),onClick:e.onTogglePause,children:e.pauseUpdates?"Tail updates":"Pause updates"})}),(0,a.jsx)(y.default,{size:"small",startIcon:(0,a.jsx)(R.A,{}),onClick:e.onReset,children:"Reset table"}),(0,a.jsx)(v.qn,{printOptions:{hideFooter:!0,disableToolbarButton:!0}}),(0,a.jsx)(N.A,{title:"Show timestamps in UTC instead of the local time zone",children:(0,a.jsx)(S.A,{control:(0,a.jsx)(O.A,{className:"ml-2",size:"small",checked:t,onChange:()=>{l(e=>!e)}}),label:"UTC"})})]})}let Q=e=>{let[t,l]=(0,c.useState)(0),s=(0,x.b)(),i=async()=>{await s.current.autosizeColumns({includeOutliers:!0})},n="".concat(e.id,"-DataGrid-Settings"),[r,o]=(0,c.useState)(void 0),d=(0,c.useRef)(void 0);(0,c.useEffect)(()=>{d.current=e.data[0]?(0,z.Iy)(e.data[0].msg):void 0},[e.data]),(0,c.useEffect)(()=>{let t=window.localStorage.getItem(n),l=void 0!==d.current;if(null===t)o(e.defaultState);else{var a,s,i;let n=null!=(i=(0,z.vf)(t))?i:{},r={...e.defaultState,...n};l&&(null==(s=r.columns)||null==(a=s.columnVisibilityModel)?void 0:a.msg)&&(r.columns.columnVisibilityModel.msg=!1),o(r)}},[n,e.defaultState,d]);let u=(0,c.useCallback)(e=>{var t;let l={sortModel:null==(t=e.sorting)?void 0:t.sortModel},a={columns:e.columns,filter:e.filter,sorting:l};try{let e=JSON.stringify(a);window.localStorage.setItem(n,e)}catch(e){(0,Y.z)("Failed to save Grid state to localStorage: ".concat(e))}},[n]),m=()=>{e.togglePauseUpdates&&e.togglePauseUpdates()},h=()=>{window.localStorage.removeItem(n),l(e=>e+1)};(0,c.useEffect)(()=>{r&&s.current.restoreState(r)},[s,r]);let[f,g]=(0,c.useState)(!1),[p,v]=(0,c.useState)(),N=(0,c.useCallback)(e=>{g(!0),v(e)},[]),I=(0,c.useMemo)(()=>[{field:"details",headerName:"Details",headerClassName:"opacity-0",width:48,resizable:!1,type:"actions",renderCell:e=>(0,a.jsx)(T.default,{"aria-label":"details",size:"small",onClick:()=>N(e.row),title:"More details",children:(0,a.jsx)(W.A,{})})},...e.columns],[N,e.columns]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.C,{loading:!e.pauseUpdates&&e.isLoading,rows:e.data,columns:I,hideFooter:e.small,getRowId:e.getRowId,disableRowSelectionOnClick:!0,apiRef:s,initialState:e.defaultState,onStateChange:r?u:void 0,slots:{toolbar:e.small?void 0:()=>(0,a.jsx)(K,{pauseUpdates:e.pauseUpdates,onTogglePause:m,onAutosizeClick:i,onReset:h}),noRowsOverlay:!1===e.enabled&&e.disabledMsg?()=>(0,a.jsx)(J,{msg:e.disabledMsg}):void 0}},t),(0,a.jsx)(X,{open:f,setOpen:g,setDetailsRow:v,row:p,apiRef:s})]})},$=[{field:"timestamp",headerName:"Timestamp",width:230,renderCell:e=>(0,a.jsx)(q,{value:e.value})},{field:"target",headerName:"Target"},{field:"id",headerName:"ID"},{field:"level",headerName:"Level"},{field:"msg",headerName:"Message",flex:1,minWidth:200}],ee={density:"compact",sorting:{sortModel:[{field:"timestamp",sort:"desc"}]},columns:{columnVisibilityModel:{}}},et=e=>{let t,[l,i]=(0,h.e)([!0,!1]),n=(t=!l,(0,s.Vw)(["applicationLogs"],(e,t)=>m(e,t),(e,t,l)=>{if(!e)return;let a=e[e.length-1];return a?a[0]:l},{refetch:t})),r=eo(n.data);return(0,a.jsx)(Q,{id:"ApplicationLogs",enabled:!l,data:r,isLoading:n.isLoading,columns:$,pauseUpdates:l,togglePauseUpdates:i,getRowId:er,small:e.small,defaultState:ee})},el=[{field:"Timestamp",headerName:"Timestamp",width:230,renderCell:e=>(0,a.jsx)(q,{value:e.value})},{field:"User-Name",headerName:"User-Name",minWidth:200},{field:"Calling-Station-Id",headerName:"Calling-Station-Id",minWidth:140},{field:"Called-Station-Id",headerName:"Called-Station-Id",minWidth:200},{field:"Result",headerName:"Result",minWidth:80},{field:"Reason",headerName:"Reason",minWidth:80},{field:"Client-IP-Address",headerName:"Client-IP-Address",minWidth:120},{field:"Client-Identifier",headerName:"Client-Identifier",minWidth:230},{field:"NAS-IP-Address",headerName:"NAS-IP-Address",minWidth:120},{field:"NAS-Identifier",headerName:"NAS-Identifier",minWidth:300},{field:"Policy",headerName:"Policy",minWidth:120},{field:"Handler",headerName:"Handler",minWidth:150},{field:"Context-Id",headerName:"Context-Id",minWidth:150},{field:"Elapsed-Time",headerName:"Elapsed-Time",minWidth:150},{field:"id",headerName:"ID",minWidth:160}],ea=[{field:"Timestamp",headerName:"Timestamp",width:230,renderCell:e=>(0,a.jsx)(q,{value:e.value})},{field:"msg",headerName:"Message",flex:1,minWidth:200},{field:"id",headerName:"ID",minWidth:160}],es={density:"compact",sorting:{sortModel:[{field:"timestamp",sort:"desc"}]}},ei=e=>{var t;let[l,n]=(0,h.e)([!0,!1]),{data:r,isLoading:o}=((e,t)=>(0,s.Vw)(["aaaLogs",e],(t,l)=>i(t,e,l),(e,t,l)=>{if(!e)return;let a=e[e.length-1];return a?a[0]:l},{refetch:t}))(e.id,!l),d=(0,c.useMemo)(()=>eo(null!=r?r:[]),[r]),u=null==(t=d[0])?void 0:t.msg,m=(0,c.useMemo)(()=>{var e;return u&&null!=(e=(0,z.Iy)(u))?e:{}},[u]),f=(0,c.useMemo)(()=>d.map(e=>{var t;return{...null!=(t=(0,z.Iy)(e.msg))?t:{},...e}}),[d]),g=(0,c.useMemo)(()=>{let t=Object.keys(m);if(0===t.length)return ea;if(!e.fixedColumns)return t.map(e=>({field:e,headerName:e})).sort((e,t)=>e.field.localeCompare(t.field));let l=t.flatMap(e=>el.find(t=>t.field===e)?[]:{field:e,headerName:e}).sort((e,t)=>e.field.localeCompare(t.field));return[...el,...l]},[m,e.fixedColumns]);return(0,a.jsx)(Q,{id:"AaaLogs-".concat(e.id),enabled:e.enabled,data:f,isLoading:o,columns:g,pauseUpdates:l,togglePauseUpdates:n,getRowId:er,small:e.small,defaultState:es,disabledMsg:"In-memory logger not configured for ".concat(e.id)})};var en=l(20063);let er=e=>"".concat(e.row_id),eo=e=>e.map((e,t)=>({...e[1],timestamp:e[0],index:t})),ed=()=>(0,a.jsx)("span",{children:(0,a.jsx)(r.default,{width:"70px"})}),eu=e=>{var t;let{data:l,isLoading:i}=(0,s.V8)(["aaaLogs"],n),r=l?Object.keys(l):[],[m,h]=(e=>{var t;let l=(0,en.useRouter)(),a=(0,en.useSearchParams)();return[(null!=(t=a.get("logtab"))?t:"")||e,(0,c.useCallback)(e=>{let t=new URLSearchParams(a);t.set("logtab",e.toString()),l.push("?"+t.toString(),{scroll:!1})},[l,a])]})("AUTHENTICATION"),f=(null==l?void 0:l[m])?m:"APPLICATION",g=(null==l||null==(t=l[m])?void 0:t.memory)!==null;return(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-96",children:[(0,a.jsx)(o.default,{sx:{borderBottom:1,borderColor:"divider",width:"100%",mb:2},children:(0,a.jsxs)(d.A,{value:f,onChange:(e,t)=>{h(t)},"aria-label":"Logger type",variant:"scrollable",scrollButtons:"auto",children:[r.includes("AUTHENTICATION")&&(0,a.jsx)(u.A,{label:"AUTHENTICATION",value:"AUTHENTICATION"}),r.includes("AUTHORIZATION")&&(0,a.jsx)(u.A,{label:"AUTHORIZATION",value:"AUTHORIZATION"}),r.includes("ACCOUNTING")&&(0,a.jsx)(u.A,{label:"ACCOUNTING",value:"ACCOUNTING"}),(0,a.jsx)(u.A,{label:"APPLICATION",value:"APPLICATION"}),r.flatMap(e=>"AUTHENTICATION"===e||"AUTHORIZATION"===e||"ACCOUNTING"===e?[]:(0,a.jsx)(u.A,{value:e,label:e},e)),i&&[(0,a.jsx)(u.A,{label:(0,a.jsx)(ed,{})},"skeleton1"),(0,a.jsx)(u.A,{label:(0,a.jsx)(ed,{})},"skeleton2"),(0,a.jsx)(u.A,{label:(0,a.jsx)(ed,{})},"skeleton3")]]})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col min-h-0",children:"APPLICATION"===f?(0,a.jsx)(et,{small:e.small}):(0,a.jsx)(ei,{id:f,fixedColumns:"AUTHENTICATION"===f||"AUTHORIZATION"===f||"ACCOUNTING"===f,enabled:g,small:e.small},f)})]})}},55295:(e,t,l)=>{Promise.resolve().then(l.bind(l,97884))},70303:(e,t,l)=>{"use strict";l.d(t,{Iy:()=>o,T3:()=>d,e_:()=>r,vf:()=>u});var a=l(20556);let s=a.g1(a.Yj(),a.L5()).optional(),i=a.Ik({message:a.Yj().optional()}).catchall(a.L5()).optional(),n=a.g1(a.Yj(),a.L5()).optional();function r(e,t,l){try{let s=a.vk((e,t)=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){t.addIssue({code:"custom",message:e.message})}return e},t).safeParse(e);if(s.success)return s.data;throw Error("Error while parsing JSON to ".concat(l,":\n\n").concat(s.error,"\n\nInput: ").concat(e))}catch(e){return}}let o=e=>r(e,s,"log entry"),d=e=>r(e,i,"HTTP error response"),u=e=>r(e,n,"DataGrid state")},74406:(e,t,l)=>{"use strict";l.d(t,{store:()=>a});let a=(0,l(80074).y$)()},89489:(e,t,l)=>{"use strict";l.d(t,{DB:()=>x,JN:()=>y,Ot:()=>C,PP:()=>S,V8:()=>b,Vw:()=>w,ed:()=>I,en:()=>A,tt:()=>j});var a=l(53455),s=l(34049),i=l(99776),n=l(67364),r=l(89460),o=l(77202),d=l(51208),u=l(12115),c=l(70303),m=l(99686),h=l(74406),f=l(9617);let g=(0,d.tG)("CurrentUser",void 0,(0,d.KU)(()=>localStorage)),p=(0,d.tG)("LoginBaseUrl","/api/v1"),v=(0,d.tG)("AutoRefresh",!0),x=()=>{let e=(0,o.useAtomValue)(g);return"docs"!==f.tR&&void 0!==e},A=()=>(0,o.useSetAtom)(g),N=()=>{let e=(0,o.useAtomValue)(g);return"docs"!==f.tR&&e},I=()=>(0,o.useAtom)(p),j=()=>(0,o.useAtomValue)(v),C=()=>(0,o.useSetAtom)(v),b=(e,t,l)=>{var i,n,r;let o=!!N(),d=null==(i=null==l?void 0:l.enabled)||i,u=o&&d,c=j(),m=y(null==l?void 0:l.disableHooks),h=c&&!!(null==(n=null==l?void 0:l.refetch)||n),f=null!=(r=null==l?void 0:l.refetchInterval)?r:1e4,g=(0,a.I)({queryKey:e,queryFn:()=>t(m),refetchInterval:h?f:void 0,refetchOnWindowFocus:h,placeholderData:(null==l?void 0:l.keepPreviousData)?s.rX:void 0,enabled:u});return u||(g={...g,isLoading:!0}),g},w=(e,t,l,a)=>{var s,r;let o=(0,i.jE)(),d=N(),c=j()&&!!(null==(s=null==a?void 0:a.refetch)||s),m=null!=(r=null==a?void 0:a.refetchInterval)?r:1e4,h=!!d,f=y(null==a?void 0:a.disableHooks),g=(0,n.q)({queryKey:e,queryFn:e=>{let{pageParam:l}=e;return t(f,l)},initialPageParam:void 0,getNextPageParam:l,refetchInterval:c?m:void 0,enabled:h,staleTime:1/0});h||(g={...g,isLoading:!0}),(0,u.useEffect)(()=>{if(!c)return;let t=setInterval(async()=>{h&&!g.isFetchingNextPage&&(await g.fetchNextPage(),o.setQueryData(e,e=>{var t;let l=[...e?e.pages:[]],a=[...e?e.pageParams:[]];return(null==(t=l.at(-1))?void 0:t.length)===0&&(l.pop(),a.pop()),{pages:l,pageParams:a}}))},1e3);return()=>clearInterval(t)},[g.fetchNextPage,g.isFetchingNextPage,h,g,o,d,c,e]);let p=(0,u.useMemo)(()=>{var e,t;return null!=(t=null==(e=g.data)?void 0:e.pages.flat())?t:[]},[g.data]);return{...g,data:p}},T=(e,t)=>function(){for(var l=arguments.length,a=Array(l),s=0;s<l;s++)a[s]=arguments[s];let[i,n]=a,r=null!=n?n:{},o=void 0!==r.json||void 0!==r.body;return t.call(e,i,o?r:{...r,json:{}})},y=e=>((e,t)=>{let l=r.Ay.extend({prefixUrl:e,credentials:"include",hooks:{beforeError:t?[]:[async e=>{var t,l,a;let s=e.message,i=null!=(t=e.response.headers.get("X-Context-Id"))?t:"<no ctx id>",n=await e.response.text().catch(()=>null),r=n?(0,c.T3)(n):null,o=null!=(a=null!=(l=null==r?void 0:r.message)?l:null==n?void 0:n.slice(0,500))?a:"";return n&&(e.body=n),r&&(e.json=r),401===e.response.status?((0,m.z)("You are not authenticated, please login again."),h.store.set(g,void 0)):"GET"===e.request.method?(0,m.z)("Error while fetching data with ".concat(i,", retrying...\n").concat(s,"\n").concat(o)):(0,m.z)("HTTP request error with ".concat(i,":\n").concat(s,"\n").concat(o)),e}]}});return l.post=T(l,l.post),l.put=T(l,l.put),l})((0,o.useAtomValue)(p),e),S=e=>"".concat(f.o2).concat(e)},90482:(e,t,l)=>{"use strict";l.d(t,{Y:()=>a});let a=(e,t)=>{let l;return Number.isNaN((l="string"==typeof e||"number"==typeof e?new Date(e):e).getTime())?"[Invalid date]":new Intl.DateTimeFormat("default",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t.utc?"UTC":void 0,timeZoneName:"short"}).format(l)}},97884:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>n});var a=l(95155);l(12115);var s=l(21460),i=l(34880);let n=()=>(0,a.jsx)(i.default,{sx:{display:"flex",position:"relative",height:"calc(100vh - 120px)"},children:(0,a.jsx)(s.Logs,{})})},99686:(e,t,l)=>{"use strict";l.d(t,{z:()=>n});var a=l(71991);let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=0xdeadbeef^t,a=0x41c6ce57^t;for(let t=0,s;t<e.length;t++)l=Math.imul(l^(s=e.charCodeAt(t)),0x9e3779b1),a=Math.imul(a^s,0x5f356495);return l=Math.imul(l^l>>>16,0x85ebca6b)^Math.imul(a^a>>>13,0xc2b2ae35),(a=Math.imul(a^a>>>16,0x85ebca6b)^Math.imul(l^l>>>13,0xc2b2ae35)).toString(36).padStart(7,"0")+l.toString(36).padStart(7,"0")},i=new Map,n=(e,t)=>{var l;console.error(e);let n=s(null!=t?t:e),r=null!=(l=i.get(n))?l:0;Date.now()-r<12e4||(i.set(n,Date.now()),(0,a.M8)({message:e,variant:"error",autoHideDuration:15e3,style:{whiteSpace:"pre-line"}}))}}},e=>{e.O(0,[9140,4854,5070,8548,870,2378,4614,7097,3202,5367,4180,449,1023,4488,5154,8157,4578,1081,3309,5385,8441,1255,7358],()=>e(e.s=55295)),_N_E=e.O()}]);